





<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" lang="en" xml:lang="en">
<head>
    <title>Ticket Code Dedicated Site Home Page</title>


<meta name="description" content="Ticket Code Dedicated Site Home Page" />

    <meta name="keywords" content="This is Microsite Generic Page" />

<meta name="rating" content="general" />
<meta name="copyright" content="2016, Live Nation Concerts" />
<meta name="expires" content="never" />
<meta name="distribution" content="global" />
<meta name="robots" content="noindex" />
<meta name="robots" content="NOODP" /><link rel="icon" href="http://s1.ticketm.net/ln/en-us/img/static/favicon-ln.ico" type="image/x-icon" />
<link rel="shortcut icon" href="http://s1.ticketm.net/ln/en-us/img/static/favicon-ln.ico" type="image/x-icon" />

<link rel="canonical" href="http://concerts.livenation.com/microsite/settlement" />
                                    



<script type="text/javascript">
    window.js_cookie_domain = "concerts.livenation.com";
    var disableResaleBaAutoExpand = 0;
    var disableVFS = 0;
    var rebranding_mvp = false;
    var rebranding = false;
</script>    <script type="text/javascript">            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            (function() {
                var gptFlag = false;
                var gads = document.createElement('script');
                gads.async = true;
                gads.type = 'text/javascript';
                var useSSL = 'https:' == document.location.protocol;
                gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
                var node = document.getElementsByTagName('script')[0];
                node.parentNode.insertBefore(gads, node);            })();    </script>
<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/tmjs.js"></script>




    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/prototype.js"></script>





  <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jquery/1.6.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
  <script src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jquery/plugins/jquery.xml2json.min.js"></script>

<script src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jquery/plugins/jquery.scrollto.min.js"></script>
<script src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jqueryui/plugins/jquery.tm.priceslider.js"></script>

<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jquery/plugins/jquery.bgiframe-2.1.2.js"></script>
<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/jqueryui/plugins/tm.js"></script>






    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/writeCapture/element.write.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/libs/writeCapture/writeCapture.js"></script>

	<script type="text/javascript">
      	</script>


<script type="text/javascript">
//<![CDATA[
	jQuery.noConflict();
		
	
	
	jQuery(document).ready(function($) {
	
    		
	
		
        

        
	});
//]]>
</script>

<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/TmPopup.js"></script>

<script type="text/javascript">
var tm_omn_account="tm-LN-USprod,tm-combinedUSprod";
var isReviews = "";
var omn_domain_owner = "LN_US:";
var tm_omni_temp = $H();
var modules_avail_per_page = $A();
var market_id = GetCookie('MARKET_ID') ? GetCookie('MARKET_ID') : '32';
tm_omni_temp.set('is_s_doPlugins_fired', false);
tm_omni_temp.set('omnVID','');
tm_omni_temp.set('omnAID','');
tm_omni_temp.set('omnEID','');
tm_omni_temp.set('omnMID','LN_US: ' + market_id);


var omniCustomClick = Class.create({
  initialize: function(initialData) {
    this.data = Object.extend({}, initialData);
  },

  handleClick: function(event) {
    $H(this.data).each(function(d){
        tm_omn[d.key] = d.value;
      });
       switch(newPage){
         case true:
                 tm_omn.t();
                 tm_omn.getPreviousValue(tm_omn.pageName,'gpv','');
         break;
         case false:
           tm_omn.tl(true,'o',clickLink);
         break;
      }
        if(tm_omni_temp.get('location_path')){
           if(newWindow == true){
               window.open(tm_omni_temp.get('location_path'),'_blank');
           }else{
               self.location.replace(tm_omni_temp.get('location_path'));
           }
            tm_omni_temp.unset('location_path');
            return false;
        }
        return true;
  },
  module_link: function(clickmod,inclusiveLink,tracking_vars, disable_eVar13){
         this.data = Object.extend({},{
                    linkTrackVars: 'events,eVar13,prop14,eVar14',
                  linkTrackEvents: 'event13',
                           events: 'event13',
                           prop14: 'LN_US: ' + clickmod,
                           eVar14: 'LN_US: ' + clickmod,
                           eVar13: 'LN_US: ' + clickmod
                  },
                 clickLink = clickmod,
                   newPage = false
                  );
      if (disable_eVar13) {
        this.data.linkTrackVars  = 'events,prop14,eVar14';
        delete this.data['eVar13'];
      }
      if(inclusiveLink){
         this.data.prop14 = "";
         this.data.linkTrackVars = this.data.linkTrackVars.gsub(/,prop14,eVar14/,"");
       }

      tracking_vars = tracking_vars || {};
      for ( var tv in tracking_vars ) {
          this.data[tv] = tracking_vars[tv];
          this.data.linkTrackVars += ',' + tv;
      }

      this.handleClick();
     },
    navigation_link2: function( clicklink, options ){
        options = Object.extend( {
            np: false,
            newWin: false,
            tracking_vars: {}
        }, options );

        this.data = Object.extend({},{
            linkTrackVars: 'prop14,eVar14',
            linkTrackEvents: 'event27',
            prop14: 'LN_US: ' + clicklink,
            eVar14: 'LN_US: ' + clicklink
        },
            clickLink = clicklink,
            newPage = options.np,
            newWindow  = options.newWin
        );

        for ( var tv in options.tracking_vars ) {
            this.data[tv] = options.tracking_vars[tv];
            this.data.linkTrackVars += ',' + tv;
        }

        tm_omni_temp.set('location_path',options.nav_url);
        this.handleClick();
    },
  navigation_link: function(clicklink,np,nav_url,newWin){
         if(!np){np= false;}
         if(newWin != false){newWin = true;}
         this.data = Object.extend({},{
                   linkTrackVars: 'prop14,eVar14',
                   linkTrackEvents: 'event27',
                          prop14: 'LN_US: ' + clicklink,
                          eVar14: 'LN_US: ' + clicklink
                  },
                 clickLink = clicklink,
                   newPage = np,
                newWindow  = newWin
                  );
      tm_omni_temp.set('location_path',nav_url);
      this.handleClick();
     },
 trackomni_favoriteshare: function(lTV,lTE,clicklink){
         count = 0;
         $A(lTV).each(function(d){
            tm_omn[d] = (d=='products' ? ';' : '' ) + lTE[count];
            count++
         });
         this.data = Object.extend({},{
                   linkTrackVars: 'prop14,eVar14,' + lTV.join(','),
                 linkTrackEvents: lTE.join(','),
                          prop14: 'LN_US: ' + clicklink,
                          eVar14: 'LN_US: ' + clicklink
                  },
                 clickLink = clicklink,
                   newPage = false
                  );

        if(!tm_omni_temp.get('shareclickSet')){
           this.handleClick();
           tm_omni_temp.set('shareclickSet','1');
           setTimeout("tm_omni_temp.unset('shareclickSet')",1500);
         }

 },
    track_page_load: function(tracking_vars){
        tracking_vars = tracking_vars || {};
        for ( var tv in tracking_vars ) {
            tm_omn[tv] =  'LN_US: ' + tracking_vars[tv];
            tm_omn.linkTrackVars += ',' + tv;
        }
        tm_omn.t();
    }
});
var omniTracking = new omniCustomClick();


TMDebug = {
    gen_tlog: function() {
        return function(){};
    }
};
</script>
<!-- TM_CUSTOM_SCRIPT -->
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/builder.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/effects.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/dragdrop.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/controls.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/slider.js"></script>
    <script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/carousel.js"></script>
<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/prototype/tm/popup.js"></script>








<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/global.js"></script>
<script type="text/javascript">
    createNamespace('TM.MetricsCollection');
    TM.MetricsCollection.timings = {
                  facade: function(){},
       initializeMetrics: function(){}
    }
</script>


<script type="text/javascript">
var promise_memberData_dataLoaded = undefined;

var _MEMBER_DATA = undefined;</script>

<script type="text/javascript">
var promise_wallpaperAdvertisement_checked = undefined;
var resolve_wallpaperAdvertisementSettled = undefined;
var get_wallpaperAdvertisementSettled = undefined;

(function () {
    var deferred_wallpaperAdvertisement_checked = jQuery.Deferred();
    promise_wallpaperAdvertisement_checked = deferred_wallpaperAdvertisement_checked.promise();

    var _wallpaperAdvertisementSettled = undefined;

    get_wallpaperAdvertisementSettled = function () {
        return _wallpaperAdvertisementSettled;
    };

    resolve_wallpaperAdvertisementSettled = function (value) {
        if (typeof value !== 'undefined' && typeof _wallpaperAdvertisementSettled === 'undefined') {
            _wallpaperAdvertisementSettled = value;
            deferred_wallpaperAdvertisement_checked.resolve(_wallpaperAdvertisementSettled);
            return value;
        } else {
            return undefined;
        }
    };
})();

jQuery( function () {
    resolve_wallpaperAdvertisementSettled(false);
} );
</script>




<script type="text/javascript">

;(function( $, window, document, undefined ) {
createNamespace('TM.Tracking.satellite');

TM.Tracking.satellite = function(){
  var taggingData = {"pageLevelData":{"pageType":"microsite_generic","language":"en-us","searchStatus":"","channel":"microsite_generic","suggestTerm":"","domain":"lu","searchTerm":"","pageDetail":""},"venueData":{"country":"","zip":"","city":"","vid":"","stateRegion":"","name":0},"mergedData":{"changeset":"0","loaded":{},"dataset":{}},"purchaseData":{"ticketQuantity":"","insurance":"","taxTotal":"","upsellTotal":"","deliveryTotal":"","orderTotal":"","ticketTotal":"","feesTotal":"","orderID":"","products":""},"eventData":{"time":"","date":"","name":"","type":"","eid":""},"callbacks":{},"artistData":{"aid":"","majorCategory":{"name":"","id":""},"primaryName":"","minorCateogry":{"name":"","id":""},"organization":"LN"},"sessionData":{"marketID":({'object':1}[typeof tm_omni_temp]) ? tm_omni_temp.get('omnMID') : '',"sid":GetCookie('SID') ? GetCookie('SID') : '',"mid":GetCookie('MID') ? GetCookie('MID') : '',"bid":GetCookie('BID') ? GetCookie('BID') : '',"promotionID":"","brand":"none","promoterID":""}};
  return {
    data : taggingData
  }
}();window.digitalData = {"page":{"pageInfo":{"onsiteSearchTerm":"","ticketInsuranceOffered":"","hostSystem":"","pageType":"microsite_generic","onsiteSearchSuggestTerm":"","eCalOmnitureStep":"","hasUpsellPage":"","promotionID":"","geoRegion":"lu","promoterID":"","onsiteSearchStatus":"","pageID":"","pageNameDetailed":"","domain":"","sysEnv":"desktop","marketID":"","referringURL":document.referrer,"eCalLoginStep":"","language":"en-us","ticketInsuranceOptionChoosen":"","destinationURL":document.location.href,"pageName":"microsite_generic","pageChannel":"microsite_generic","ticketInsurancePurchased":"","edpType":""},"category":{"primaryCategory":"","primaryCategoryID":"","subCategory1":"","subCategory2":"","subCategory1ID":"","organization":"LN"},"attributes":{"secondaryArtistName":[],"venueID":"","errors":{"others":"","billing":""},"artistName":"","eventTime":"","eventOnsaleDateTime":"0","brand":"none","eventResaleEligible":0,"modulesAvailable":"","state":"","artistID":"","city":"","secondaryArtistID":"","eventOnsaleTime":"0","country":"","eventID":"","inventoryType":"","eventOnsaleDate":"","zip":"","eventName":0,"venueName":0,"eventDate":""}},"version":".1","user":[],"pageInstanceID":"","event":[]};

})(jQuery, window, document );
</script>        <!-- Begin Monetate ExpressTag Sync v8. Place at start of document head. DO NOT ALTER. -->
        <script type="text/javascript">
        var monetateT = new Date().getTime();
        (function() {
            var p = document.location.protocol;
            if (p == "http:" || p == "https:") {
                var m = document.createElement("script"); m.type = "text/javascript"; m.src = (p == "https:" ? "https://s" : "http://") + "e.monetate.net/js/2/a-a1627c0e/p/ticketmaster.com/entry.js";
                var e = document.createElement("div"); e.appendChild(m); document.write(e.innerHTML);
            }
        })();
        </script>
        <!-- End Monetate tag. -->
        <script type="text/javascript">window.monetateQ = window.monetateQ || [];</script>
<script type="text/javascript"></script>

















<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/base64.js"></script>

<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/unicode.js"></script>



<script type="text/javascript">
//<![CDATA[

    new CookieTree( '_E' ).remove( 'flags' );



    TMCookie.remove( 'CART', { domain: js_cookie_domain } );
    TMCookie.remove( 'CART_SAVE_FAIL', { domain: js_cookie_domain } );
    TMCookie.remove( 'NTF', { domain: js_cookie_domain } );
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
    var extraWT = new Array();
//]]>
</script>
<script type="text/javascript">
//<![CDATA[

// <!--
// This code below extracts the contents of the
// location.search and conveniently seperates
// the name and value into a usable form.
// Don't alter this code.
//  -->
function replace(str, from, to) {
    var i = str.indexOf(from);
    if (!from || !str || i == -1) return str;
    var newstr = str.substring(0, i) + to;
    if (i+from.length < str.length)
        newstr += replace(str.substring(
        i+from.length,str.length),from,to);
    return newstr;
}
function getQry(nm)
{
    if (!location.search) return '';
    var i, j, qry;
    qry = location.search.substring(1);
    i = qry.indexOf(nm)+nm.length+1;
    if (i == nm.length) return '';
    j = qry.indexOf('&',i);
    if (j+1) qry = qry.substring(i,j);
    else     qry = qry.substring(i);
    return unescape(replace(qry, '+', ' '));
}

function substitute(str, from, to) {
    var i = str.indexOf(from);
    if (!from || !str || i == -1) return str;
    var newstr = str.substring(0, i);
    if (i+from.length < str.length)
        newstr += replace(str.substring(
        i+from.length,str.length),from);
    return newstr;

}
function convert(nm)
{
    if (!location.search) return '';
    var i, j, qry;
    qry = location.search.substring(1);
    i = qry.indexOf(nm)+nm.length+1;
    if (i == nm.length) return '';
    j = qry.indexOf('&',i);
    if (j+1) qry = qry.substring(i,j);
    else     qry = qry.substring(i);
    return unescape(substitute(qry, '+'));
}


function gener_seatven(x,y){
var newx;
var cssval=aolcsscheck();
  if (getQry('style') || cssval) {
    newVal=(cssval) ? cssval : getQry('style');
    newx = x + "?style=" +  newVal;
  }
  else {
    newx = x;
  }
     windowabandon = window.open(newx,y,'width=800,height=600,toolbar=0,location=0,directories=0,status=0,scrollbars=1,menubar=0,resizable=1');
}
function aolcsscheck(){
  var aolcss = new Array ('aolboxoffice','aolsvcboxoffice','aolsvcsportsbox','aolsvcmusicbox','africanaboxoffice','nsboxoffice');
  for(y=0;y < aolcss.length;y++){
      if(document.URL.indexOf('brand='+aolcss[y])!=-1){return aolcss[y];}
      }
  return false;
}

function grabUrl() {
   var ticketPath = "http://s1.ticketm.net/ln/en-us/img/sys/exchange/"
   TMObject(mName).SetVariable("serverUrl", ticketPath);

   var tmPath = "http://concerts.livenation.com/"
   TMObject(mName).SetVariable("tmUrl", tmPath);

}

function starRatingDisplay(rating) {
    var star_rating = (rating - parseInt(rating)).toFixed(1);    var offset;
    switch (star_rating) {
        case "0.1":       
             if(parseInt(rating) == 0 || parseInt(rating) == 1){
                 offset = 0;
             }  
             else{
                 offset = 1 - parseInt(rating); 
             }      
             break
        case "0.2": case "0.3":
             offset = 7;           
             break
        case "0.4": case "0.5": case "0.6":
             offset = 8;       
             break
        case "0.7": case "0.8":
             offset = 9;
             break
        case "0.9":
             if(parseInt(rating) == 0 ){
                 offset = 15;
             }
             else if(parseInt(rating) == 4 ){
                 offset = 14;
             }    
             else{
                 offset = 15 - parseInt(rating);
             }                  
             break
        default: 
             if(parseInt(rating) == 1 ){
                 offset = 0;
             }
             else if(parseInt(rating) == 5 ){
                 offset = -1;
             }         
             else{
                 offset = 1 - parseInt(rating);
             }
             break
     }
    var final_display_percent = ( parseInt(rating) * 15 +  offset ) + "px";
    return final_display_percent;
 }

//////////////////////////////////////////////////////////////////////////
// Change Location JS for Top Nav and Browse Box
//////////////////////////////////////////////////////////////////////////
    var reg_ex = new RegExp("&eacute;","g");
    var replaceItem = '\u00E9';

var location_text = 'Enter City or Zip Code';
location_text = location_text.replace(reg_ex,replaceItem);

var page_context_uri = "73dVDPMQ_GVy97DN3krIKhQtQw_Jgxd0VJqKv7jx-jsA2iqodKtx2ddA2JxtHuWlErOAyDsutfHQsPx5-aOxnzQ_iL9aHhcz5OXX9KJb8SY6dyf6H_8vMCBxFbBQ";


            var tree = new CookieTree( '_E' );
            tree.remove( 'did' );
            tree.remove( 'mode' );
            tree.remove( 'pp' );
            tree.remove( 'pw' );
            tree.remove( 'cdv' );
            tree.remove( 'wad' );
            tree.remove( 'sl' );
            tree.remove( 'landing' );                tree.remove( 'ttid' );
                tree.remove( 'ot' );
//]]>
</script>

<script type="text/javascript">
//////////////////////////////////////////////////////////////////////////
// Search Suggest JS for Search Box
//////////////////////////////////////////////////////////////////////////
var global = new Hash();
var search_suggest = null;global.set('cancel_hide', 0);
global.set('opens_in_a_new_window', 'opens in a new window'); // for shoppinglist and all of the situation that need to use the string 'opens in a new window'.
var KEY = {
            UP: 38,
            DOWN: 40,
            ESC: 27,
            ENTER: 13
    };

Ajax.Request.prototype.abort = function() {
    this.transport.onreadystatechange = Prototype.emptyFunction;
    this.transport.abort();
    Ajax.activeRequestCount--;
};

String.prototype.decodeSuggestItem=function() {
    return this.replace(/\&amp\;/g, '\&').replace(/\&gt\;/g, '\>').replace(/\&lt\;/g, '\<').replace(/\&quot\;/g, '\'').replace(/\&\#39\;/g, '\'');
};

String.prototype.encodeSearchTerm=function(){
    return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;").replace(/\'/g,"&#39;");
};

var SearchSuggest = Class.create({
    initialize: function(mode) {
        this.mode = mode !== undefined && mode === SearchSuggest.MODES.DIRECT ? SearchSuggest.MODES.DIRECT : SearchSuggest.MODES.STANDARD;
        this.index = 0;
        this.keyword = '';
        this.event = null;
        this.length = 0;
        this.elements = null;
        this.reset();
        var categories = $$("#search-suggest-categories li");
        for( var i=0; i < categories.length; i++ ) {
            var li = categories[i];
            Event.observe(li, 'mouseover', function () {
                global.set('cancel_hide', 1);
            });
            Event.observe(li, 'mouseout', function(e) {
                global.set('cancel_hide', 0);
            });
        }
    },
    _getSuggestCmp: function () {
        return $("search-suggest") || $("searchSuggest");
    },
    reset: function () {
        this.index = -1;
        this.elements = null;
        this._getSuggestCmp().hide();

        $("searchSuggest-result").update('');        var search_id = $('search_id');
        search_id.name = "";
        search_id.value = "";
    },
    showHistory: function () {
        var suggest_header = $('suggest-header');
        suggest_header.innerHTML = "Recent Searches";
        suggest_header.show();

        $('suggest-categories-header').show();
        $('search-suggest-categories').show();
        this._getSuggestCmp().show();
    },
    showEmptyHistory: function () {
        $('suggest-header').hide();
        $('suggest-categories-header').show();
        $('search-suggest-categories').show();
        this.reset();
        this._getSuggestCmp().show();
    },
    showSuggestionsResults: function () {
        var suggest_header = $('suggest-header');            suggest_header.innerHTML = "Top Suggestions";
            suggest_header.show();        $('suggest-categories-header').hide();
        $('search-suggest-categories').hide();
        this._getSuggestCmp().show();
    },
    _suggestionEventText: function(upcomingEvents) {
        return upcomingEvents == 1 ?
            " event" :
            " events";
    },
    _buildCircleImage: function(src,circle) {
        var canvas = jQuery('<canvas/>');
        if(circle){
            canvas.addClass('circle');
        }
        canvas = canvas[0];
        canvas.height = 45;
        canvas.width = 45;

        var context = canvas.getContext('2d');
        var imageObj = new Image();
        imageObj.onload = function() {
            if(imageObj.width > canvas.width){
                var imgWidth = imageObj.width;
                var imgHeight = imageObj.height;
                var imgOffset = Math.abs(imgWidth - imgHeight)/2;
                if(imgWidth > imgHeight){
                    context.drawImage(imageObj, imgOffset, 0, imgWidth - imgOffset*2, imgHeight, 0, 0, canvas.width, canvas.height);
                }else{
                    context.drawImage(imageObj, 0, imgOffset, imgWidth, imgHeight - imgOffset*2, 0, 0, canvas.width, canvas.height);
                }
            }else{
                context.drawImage(imageObj, (canvas.width - imageObj.width)/2, (canvas.width - imageObj.width)/2,imageObj.width,imageObj.width);
            }
        };
        imageObj.src = src;
        return canvas;
    },
    buildSuggestionItem: function (item, type) {
        var link_href;
        var _parent = this;
        var omnitrack="";

        var li = new Element('li', {
             "class": "bucket-item",
             "itemName": item.name,
        });

        Event.observe(li, 'mouseover', function () {
            global.set('cancel_hide', 1);
        });
        Event.observe(li, 'mouseout', function(e) {
            global.set('cancel_hide', 0);
        });

        var a = jQuery('<a/>');
        var itemWrapperDiv = jQuery('<div/>', {class: 'bucket-item-wrapper'});
        var itemImageDiv = jQuery('<div/>', {class: 'bucket-item-image'});
        var itemTextDiv = jQuery('<div/>', {class: 'bucket-item-text'});

        itemWrapperDiv.append(itemImageDiv,itemTextDiv);
        a.append(itemWrapperDiv);

        if(item.name !== undefined){
            var nameSpan = jQuery('<span/>',{ class: 'name', html: item.name});
            itemTextDiv.append(nameSpan);
        }
        var span = jQuery('<span/>', { class: 'suggest-cat' });
        switch (type) {
            case "event_exact_match":
                omnitrack="SUGG_EDP";
                itemTextDiv.append(jQuery('<span/>', {
                   class:"bucket-item-highlighted",
                   text: item.localEventShortWeekday+ ",  " + item.localEventShortMonth+ " " + item.localEventDay
                }));
                itemTextDiv.append(jQuery('<span/>', {html: item.venueName}));
                itemTextDiv.append(jQuery('<span/>', {html: item.eventName, class: 'suggest-cat'}));
                if( item.systemURL !== null){
                     itemTextDiv.append(jQuery('<span/>', {class: 'suggest-cat', html: _parent.getPartnerLocation(item)}));
                }
                link_href = _parent.buildEventURL(item);
                break;
            case "event":
                omnitrack="SUGG_EDP";
                li.classList.add("bucket-item-event");

                span.append(jQuery('<span/>', {
                    class: 'bucket-item-highlighted',
                    html: item.date
                }));
                span.append(jQuery('<span/>', {html:item.venueName}));
                if( item.systemURL !== null){
                     span.append(jQuery('<span/>', {class: 'suggest-cat', html: _parent.getPartnerLocation(item)}));
                }
                link_href = _parent.buildEventURL(item);
                break;
            case "attraction":
                 omnitrack="SUGG_ADP";
                li.setAttribute('searchId',item.id);
                li.setAttribute('searchType',"aid");
                var srcImage;
                if (item.image == null) {
                    switch (item.majorGenreId[0]) {
                        case 10001 :
                            srcImage = 'http://s1.ticketm.net/ln/en-us/img/sys/search/music.png';
                            break;
                        case 10002:
                            srcImage = 'http://s1.ticketm.net/ln/en-us/img/sys/search/arts.png';
                            break;
                        case 10003:
                            srcImage = 'http://s1.ticketm.net/ln/en-us/img/sys/search/family.png';
                            break;
                        case 10004:
                            srcImage = 'http://s1.ticketm.net/ln/en-us/img/sys/search/sports.png';
                            break;
                    }
                }else{
                    srcImage = 'http://s1.ticketm.net/ln/en-us'+item.image;
                }
                itemImageDiv.append(_parent._buildCircleImage(srcImage,(item.image == null)?false:true));
                span.html(item.minorGenreName[0] + ' - ' + item.upcomingEvents + _parent._suggestionEventText(item.upcomingEvents));
                link_href = "http://www.livenation.com" + '/artist/' + item.id;
                break;
            case "venue":
                 omnitrack="SUGG_VDP";
                li.setAttribute('searchId',item.id);
                li.setAttribute('searchType',"vid");
                var srcImage;
                if (item.image == null) {
                    srcImage = 'http://s1.ticketm.net/ln/en-us/img/sys/search/venue.png';
                } else {
                    srcImage = 'http://s1.ticketm.net/ln/en-us'+item.image;
                }
                itemImageDiv.append(_parent._buildCircleImage(srcImage,(item.image == null)?false:true));
                span.html (item.venueCityState + ' - ' + item.upcomingEvents + _parent._suggestionEventText(item.upcomingEvents));
                link_href = "http://www.livenation.com" + '/venue/' + item.id;
                break;
        }

        if (link_href) {
            link_href = _parent.encodedURL(link_href);
            li.setAttribute('data-directURL', link_href);
            a.attr('href',link_href);
            a.click(function(){
              omniTracking.navigation_link2(omnitrack, {
                tracking_vars: {
                    eVar7: ''+ jQuery('#search_input').val()+' > '+ item.name +' ('+omnitrack+')'
                }
        });
            });
        }
        li.appendChild(a[0]);
        itemTextDiv.append(span);
        return li;
    },
    buildNewTable: function(data){
        this.reset();
        var suggestion = $("searchSuggest") || $("search-suggest") || $("searchSuggest");
        var _parent = this;
        if(data.events.length > 0 && data.exactmatches == 0) {
            var event_title = new Element('div', {
                "class": "search-suggestions-bucket-title"
            });
            event_title.innerHTML = "Upcoming Events Near You";
            suggestion.appendChild(event_title);
            var events_bucket = new Element('ul', {
                "class":"absolute-no-bullet select-list-theme search-suggestions-bucket",
                "id":"events_bucket"
            });
            for( var i = 0; i < data.events.length; i++ ) {
                events_bucket.appendChild(_parent.buildSuggestionItem(data.events[i],"event"));
            }
            if(data.eventsFound && data.eventsFound > data.events.length) {
                events_bucket.appendChild(_parent.getLiSeeMoreItemsFounds({'labelSeeMoreEvents':'See More Events', 'match':false, 'omnitrack':'event'}));
            }
            suggestion.appendChild(events_bucket);
        }
        if(data.attractions.length > 0) {
            var attraction_title = new Element('div', {
                "class": "search-suggestions-bucket-title bordered"
            });
            attraction_title.innerHTML = "Performers";
            suggestion.appendChild(attraction_title);
            var attractions_bucket = new Element('ul', {
                "class":"absolute-no-bullet select-list-theme search-suggestions-bucket",
                "id":"attractions_bucket"
            });

            for( var i = 0; i < data.attractions.length; i++ ) {
                var attraction = data.attractions[i];
                attractions_bucket.appendChild(_parent.buildSuggestionItem(attraction,"attraction"));

                for(var j = 0; j < attraction.events.length; j ++){
                    attractions_bucket.appendChild(_parent.buildSuggestionItem(attraction.events[j],"event_exact_match"));
                }

                if(attraction.upcomingEvents > attraction.events.length && attraction.events.length == 3) {
                    attractions_bucket.appendChild(
                        _parent.getLiSeeMoreItemsFounds({'labelSeeMoreEvents':'See More Events', 'match':true, 'type':'attraction', 'item':attraction, 'omnitrack':'attraction'})
                    );
                }
            }
            if(data.attractionsFound && data.attractionsFound > data.attractions.length) {
                var li=_parent.getLiSeeMoreItemsFounds({'labelSeeMoreEvents':'See More Performers', 'match':false, 'omnitrack':'attraction'});
                attractions_bucket.appendChild(li);
            }
            suggestion.appendChild(attractions_bucket);
        }
        if(data.venues.length > 0) {
            var venues_title = new Element('div', {
                "class": "search-suggestions-bucket-title bordered"
            });
            venues_title.innerHTML = "Venues";
            suggestion.appendChild(venues_title);
            var venues_bucket = new Element('ul', {
                "class":"absolute-no-bullet select-list-theme search-suggestions-bucket",
                "id":"venues_bucket"
            });
            for( var i = 0; i < data.venues.length; i++ ) {
              var venue = data.venues[i];
              venues_bucket.appendChild(_parent.buildSuggestionItem(venue,"venue"));

              for(var j = 0; j < venue.events.length; j ++){
                  venues_bucket.appendChild(_parent.buildSuggestionItem(venue.events[j],"event_exact_match"));
              }

              if(venue.upcomingEvents > venue.events.length && venue.events.length == 3) {
                  venues_bucket.appendChild(
                      _parent.getLiSeeMoreItemsFounds( {'labelSeeMoreEvents':'See More Events', 'match':true, 'type':'venue', 'item':venue, 'omnitrack':'venue'} )
                  );
              }
            }
            if(data.venuesFound && data.venuesFound > data.venues.length) {
                venues_bucket.appendChild(_parent.getLiSeeMoreItemsFounds({'labelSeeMoreEvents':'See More Venues', 'match':false, 'omnitrack':'venue'}));
            }
            suggestion.appendChild(venues_bucket);
        }
        this.elements = jQuery('.bucket-item');
        this.length = this.elements.length;
        this.showSuggestionsResults();
    },

    buildEventURL: function(event){

        var event_url;
        if( event.PostProcessedData && event.PostProcessedData.system_url ) {
            var current_domain = 'lu';
            var valid_partner = false;
            if (event.purchase_domain) {
                valid_partner = true;
            } else {
                var url = event.systemURL.toLowerCase();
                if (url) {
                    var queue;
                    if (current_domain == 'au') {
                        queue = ['ticketing.ticketmaster.com.au'];
                    } else if (current_domain == 'us') {
                        queue = ['ticketweb'];
                    } else {
                        queue = tm_omni_temp.get(current_domain + '_h');
                    }
                    if (queue) {
                        for (i = 0 ; i < queue.length ; i++) {
                            if (url.indexOf(queue[i]) !== -1) {
                                valid_partner = true;
                                break;
                            }
                        }
                    }
                }
            }
            var pr_postpend = "&eventid=" + event.id + "&artistid=" + event.AttractionId.first();

            if (valid_partner) {
               pr_postpend += "&crosssite=LN_US:" + event.AttractionId.first() + ":" + event.venueId;
            }
            event_url = 'http://concerts.livenation.com/partner_redirect?v=' + encodeURIComponent( event.PostProcessedData.system_url ) + pr_postpend;
        }
        else {
            event_url = 'http://concerts.livenation.com/' + event.SEOName + '/event/' + event.id + '?artistid=' + event.AttractionId.first();
        }        return event_url;
    },

    getPartnerLocation : function (event) {
        var disp_hop_text = '';
        var org_hash = {
            'other' : {
                 org_id : 14,
                hop_txt : 'on Partner Site'
            },12 : {
                 org_id : 11,
                hop_txt : 'on Live Nation'
            },1 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },2 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },3 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },4 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },5 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },6 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },7 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },8 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },9 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },10 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            },11 : {
                 org_id : 12,
                hop_txt : 'on Ticketmaster'
            }        };
        if (event.systemURL) {
            var is_resalePartner = check_resalePartnerURL( event.SystemURL );
            if(event.PurchaseDomain){
                if (is_resalePartner) {
                    disp_hop_text = 'Resale Tickets on Partner Site';
                }else{
                    disp_hop_text = org_hash[ event.PurchaseDomain ].hop_txt;
                }
            }else {
                if (is_resalePartner) {
                    disp_hop_text = 'Resale Tickets on Partner Site';
                }else{
                    if (event.PostProcessedData.PollingLinkStatus == '1'){
                        disp_hop_text = event.PostProcessedData.PollingLinkText;
                    }else {
                        disp_hop_text = org_hash[ 'other' ].hop_txt;
                    }
                }
            }
        }
        if (event.PostProcessedData && event.PostProcessedData.PollingLinkStatus == '2'){
            disp_hop_text = "";
        }
        return disp_hop_text;
    },

    encodedURL: function(link_href){
        var parsed_uri,parsed_query;
        parsed_uri = __GLOBALS.util.parseURI(link_href);
        if (parsed_uri) {
            parsed_query = __GLOBALS.util.parseAndDecodeURIQuery(parsed_uri.query);
            if (!parsed_query) {
                parsed_query = {};
            }
            parsed_query.tm_link = "tm_header_search";
            parsed_uri.query = __GLOBALS.util.encodeAndBuildURIQuery(parsed_query);
            link_href = __GLOBALS.util.buildURI(parsed_uri);
        }
        return link_href;
    },
    /*
    * {labelSeeMoreEvents, match, type, item, omnitrack}
    */
    getLiSeeMoreItemsFounds: function (params) {

         var labelSeeMoreEvents=params.labelSeeMoreEvents;
         var match=params.match;
         var type=params.type;
         var item=params.item;
         var omnitrack=params.omnitrack;
         var _parent = this;
         var li = jQuery('<li/>', {class: "bucket-item", itemName: _parent.keyword});

         Event.observe(li[0], 'mouseover', function () {
             global.set('cancel_hide', 1);
         });
         Event.observe(li[0], 'mouseout', function (e) {
             global.set('cancel_hide', 0);
         });

         var a = jQuery('<a/>', { class: "bucket-item-highlighted"});
         var itemWrapperDiv = jQuery('<div/>', {class: 'bucket-item-wrapper'});
         var itemImageDiv = jQuery('<div/>', {class: 'bucket-item-image'});
         var itemTextDiv = jQuery('<div/>', {class: 'bucket-item-text'});
         itemWrapperDiv.append(itemImageDiv, itemTextDiv);
         a.append(itemWrapperDiv);

         var nameSpan = jQuery('<span/>', {html: labelSeeMoreEvents});
         var link_href;
         itemTextDiv.append(nameSpan);
         var omnitrackTag="";
          switch (omnitrack) {
              case "attraction" :
                  omnitrackTag = "SUGG_MORE_PERFORMERS";
                  break;
               case "event" :
                  omnitrackTag = "SUGG_MORE_EVENTS";
                  break;
              case "venue" :
                  omnitrackTag = "SUGG_MORE_VENUES";
                  break;
            }
          if(omnitrackTag!=""){
              a.click(function(){
                jQuery.get("")
                omniTracking.navigation_link2(omnitrackTag, {
                   tracking_vars: {
                      eVar7: ''+ jQuery('#search_input').val()+' ('+omnitrackTag+')'
                      }
                  });
              });
            }
         li.append(a);
         if (!match) {
            itemTextDiv.addClass('more-items');
            Event.observe(li[0], 'click', function (e) {
                _parent.updateHiddenId(this);
                e.stop();
                $('search_form').submit();
            });
         }else{
            switch (type) {
                case "attraction" :
                    link_href = "http://www.livenation.com" + '/artist/' + item.id;
                    break;
                case "venue" :
                    link_href = "http://www.livenation.com" + '/venue/' + item.id;
                    break;
            }
            link_href = _parent.encodedURL(link_href);
            li.attr('data-directURL', link_href);
            a.attr('href',link_href);
         }
         return li[0];
     },

    buildTable: function(data) {
        this.reset();
        var suggest_ul = $("searchSuggest-result");
        var _parent = this;
        var link_href;
        var parsed_uri,
            parsed_query;
        var dataItem;
        for( var i=0; i < 10 && i < data.length; i++ ) {
            dataItem = data[i];
            var search_type = dataItem.VenueId ? "vid" : "aid";
            var search_id = dataItem.AttractionId ? dataItem.AttractionId[0] : dataItem.VenueId;
            var item_name = dataItem.Autocomplete;
            var li = new Element('li', {
                "li_index": i,
                "searchType": search_type,
                "searchId": search_id,
                "itemName": item_name
            });
            Event.observe(li, 'mouseover', function () {
                global.set('cancel_hide', 1);
                _parent.updateTable(this);
            });
            Event.observe(li, 'mouseout', function(e) {
                global.set('cancel_hide', 0);
                this.className = "";
            });
            Event.observe(li, 'click', function(e) {
                _parent.updateHiddenId(this);
                if ( _parent.mode === SearchSuggest.MODES.STANDARD ) {
                  e.stop();
                  $('search_form').submit();
                }
            });

            var event_count = dataItem.UpcomingEvents + " events";
            var follow_span = new Element('span', {"class":"suggest-cat"});
            if ( dataItem.VenueId ) {
                var venue_follow_str = dataItem.CityState;
                    venue_follow_str = venue_follow_str + " - " + event_count;                follow_span.innerHTML = "(" + venue_follow_str + ")";
            }
            else if (dataItem.AttractionId){

                var major_cate = dataItem.MainMajorGenre;
                var minor_cate = dataItem.MainMinorGenre;
                var major_id = dataItem.MajorGenreId[0];
                var arr_str = new Array();
                var tmp_str;
                //control Search Suggest display by combination of Domian & Major Cat
                switch (major_id) {
                    //music
                    case 10001 :
                        arr_str.push(major_cate);
                        arr_str.push(minor_cate);
                        arr_str.push(event_count);                        break;
                    //art&theater
                    case 10002 :
                        arr_str.push(major_cate);
                        arr_str.push(minor_cate);
                        arr_str.push(event_count);                        break;
                    //family
                    case 10003 :
                        arr_str.push(major_cate);
                        arr_str.push(minor_cate);
                        arr_str.push(event_count);                        break;
                    //sports
                    case 10004 :
                        arr_str.push(major_cate);
                        arr_str.push(minor_cate);
                        arr_str.push(event_count);                        break;
                    default :
                        break;
                }

                if ( arr_str.length > 0) {
                    tmp_str = arr_str.join(" - ");
                    follow_span.innerHTML = "(" + tmp_str + ")";
                }
            }
            var a = new Element('a');
            a.innerHTML = dataItem.AutocompleteHighlight;
            if (this.mode === SearchSuggest.MODES.DIRECT) {
                link_href = undefined;
                if (dataItem.VenueId) {
                    link_href = "http://www.livenation.com" + '/venue/' + dataItem.VenueId;
                } else if (dataItem.AttractionId && dataItem.AttractionId) {
                    link_href = "http://www.livenation.com" + '/artist/' + dataItem.AttractionId;
                }
                if (link_href) {
                    link_href = _parent.encodedURL(link_href);
                    li.setAttribute('data-directURL', link_href);
                    a.href = link_href;
                }
            }
            a.appendChild(follow_span);
            li.appendChild(a);
            suggest_ul.insert(li);
        }
        var suggest = $("search-suggest") || $("searchSuggest");
        Event.observe(suggest, 'mouseout', function(e) {
            this.index = -1;
        });
        this.elements = $$("#searchSuggest-result li");
        this.length = this.elements.length;
        this.showSuggestionsResults();
    },
    getData: function() {
        var _parent = this;
        var opt = {
            method: "get",
            onSuccess: function(t) {
                var data = t.responseText.evalJSON(true);
                _parent._getSuggestCmp().hide();                if (data.response && data.response.docs.length > 0) {
                    _parent.buildTable(data.response.docs);
                }            },
            onFailure: function() {
                alert("An error occurred, please try again later.");
            }
        };
        var prev_ajax = global.get('myajax');
        if ( prev_ajax ) {
            prev_ajax.abort();
        }
        var requestURL = 'http://concerts.livenation.com/json/search/suggest?q=' + encodeURIComponent(this.keyword) ;

        if( typeof search_suggest_endpoint_a_b !== "undefined" ){
                  requestURL += '&nsse=' + search_suggest_endpoint_a_b;
        }

        var curr_ajax = new Ajax.Request(requestURL, opt);
        global.set('myajax', curr_ajax);
    },
    updateTable: function(li) {
        if ( this.index >= 0 ) {
            this.elements[this.index].className = "";
        }
        li.className = "selected";
        this.index = li.getAttribute('li_index');
    },
    updateHiddenId: function(li) {
        var search_type = li.getAttribute('searchType');
        var search_id = li.getAttribute('searchId');
        var item_name = li.getAttribute('itemName');
        $("search_input").value = item_name.decodeSuggestItem();
        if(search_id) {
            var search_id_element = $('search_id');
            search_id_element.name = search_type;
            search_id_element.value = search_id;
        }
    },
    autoComplete: function (keyword) {
        this.keyword = keyword;
        this.getData();
    },
    showSearchHistory: function(){
        var _parent = this;
        var searches;
        try{
            searches = JSON.parse(decodeURIComponent(TMCookie.get('TM_SEARCH_HISTORY')));
        }catch(e){
            searches = [];
        }
        var link_href;
        var parsed_uri,parsed_query;
        if (searches && searches.constructor === Array && searches.length > 0) {
            this.reset();
            var suggest_ul = $("searchSuggest-result");
            var dataItem;
            for (var i = 0; i < searches.length; i++) {
                dataItem = searches[i];
                var item_name = dataItem.search.replace(/\+/g," ");
                var li = new Element('li', {
                    "li_index": i,
                    "itemName": item_name,
                    "class": "recent"
                });
                var a = new Element('a');
                a.innerHTML = item_name;

                Event.observe(li, 'mouseover', function () {
                    global.set('cancel_hide', 1);
                });
                Event.observe(li, 'mouseout', function(e) {
                    global.set('cancel_hide', 0);
                });

                Event.observe(li, 'click', function (e) {
                     omniTracking.navigation_link2('SUGG_HIST',{
                      tracking_vars: {
                         eVar7:  item_name + ' (SUGG_HIST)'
                      }
                    });
                    _parent.updateHiddenId(this);
                    if (_parent.mode === SearchSuggest.MODES.STANDARD) {
                        e.stop();
                        $("org_input").value = item_name;
                        $('search_form').submit();
                    }
                });

                if (this.mode === SearchSuggest.MODES.DIRECT) {

                    link_href = "http://www.livenation.com" + '/search?q='+dataItem.search;
                    parsed_uri = __GLOBALS.util.parseURI(link_href);
                    if (parsed_uri) {
                        parsed_query = __GLOBALS.util.parseAndDecodeURIQuery(parsed_uri.query);
                        if (!parsed_query) {
                            parsed_query = {};
                        }
                        parsed_query.tm_link = "tm_header_search";
                        parsed_uri.query = __GLOBALS.util.encodeAndBuildURIQuery(parsed_query);
                        link_href = __GLOBALS.util.buildURI(parsed_uri);
                    }
                    li.setAttribute('data-directURL', link_href);
                    a.href = link_href;
                }
                li.appendChild(a);
                suggest_ul.insert(li);
            }
            this.elements = $$("#searchSuggest-result li");
            this.length = this.elements.length;
            this.showHistory();
        } else {
            this.showEmptyHistory();
        }
    },
    prev: function() {
        if ( this.elements ) {
            if ( this.index > 0 ) {
                this.elements[this.index].className = "";
                this.index--;
                this.elements[this.index].className = "selected";
                this.updateHiddenId(this.elements[this.index]);
            }
            else {
                this.index = -1;
                initHiddenParam();
                this.elements[0].className = "";
                $("search_input").value = $("org_input").value;
            }
        }
    },
    next: function() {
        if ( this.elements ) {
            if ( this.index >= 0 ) {
                this.elements[this.index].className = "";
            }
            this.index = (++this.index) % this.length;
            this.elements[this.index].className = "selected";
            this.updateHiddenId(this.elements[this.index]);
        }
    },
    currentElement: function () {
        return this.elements && this.elements[this.index] ? this.elements[this.index] : null;
    },

    /*new search suggestions functions*/
    prev_new: function() {
        if (this.elements) {
            if (this.index > 0) {
                this.elements[this.index].classList.remove("selected");
                this.index--;
                this.elements[this.index].classList.add("selected");
                this.updateHiddenId(this.elements[this.index]);
            }
            else {
                this.index = -1;
                initHiddenParam();
                this.elements[0].classList.remove("selected");
                $("search_input").value = $("org_input").value;
            }
        }
    },
    next_new: function() {
        if (this.elements) {
            if (this.index >= 0) {
                this.elements[this.index].classList.remove("selected");
            }
            this.index = (++this.index) % this.length;
            this.elements[this.index].classList.add("selected");
            this.updateHiddenId(this.elements[this.index]);
        }
    }

});

SearchSuggest.MODES = {
    STANDARD: "standardMode",
    DIRECT: "directMode"
};

function showSearchHistory(event) {
    var keyword = $("search_input").value;
    if(keyword.length == 0){
        searchHistory.delay("0.1");
    }
}
function showNewSuggestions() {
    var event = arguments[0] || event;
    var search_input = $("search_input");
    var keyword = search_input.value;
    var suggestion = $("searchSuggest") || $("search-suggest") || $("searchSuggest");
    if(keyword.length == 0 && suggestion.style.display === 'none' ) {
        searchHistory.delay("0.1");
    }
    else if(keyword.length > 0 && keyword.length < 3) {
        $("org_input").value = keyword;
        suggestion.hide();
        var exist_ajax = global.get('myajax');
        if (exist_ajax) {
            exist_ajax.abort();
        }
    } else {
        switch (event.keyCode) {
            case KEY.UP:
                search_suggest.prev_new();
                break;
            case KEY.DOWN:
                search_suggest.next_new();
                break;
            case KEY.ESC:
                search_suggest.reset();
                search_input.value = $("org_input").value;
                break;
            case KEY.ENTER:
                break;
            default:
                $("org_input").value = keyword;
                sendRequest.delay("0.1", keyword);
                break;
        }
    }
}

function showSuggestions() {
    var event = arguments[0] || event;
    var keyword = $("search_input").value;
    if ( keyword.length < 3 ) {
            $("org_input").value = keyword;
            var suggestion = $("searchSuggest") || $("search-suggest") || $("searchSuggest");
            suggestion.hide();
            var exist_ajax = global.get('myajax');
            if ( exist_ajax ) {
                exist_ajax.abort();
            }
    }
    else {
        switch (event.keyCode) {
                case KEY.UP:
                    search_suggest.prev();
                    break;
                case KEY.DOWN:
                    search_suggest.next();
                    break;
                case KEY.ESC:
                    search_suggest.reset();
                    $("search_input").value = $("org_input").value;
                    break;
                case KEY.ENTER:
                    break;
                default:
                    $("org_input").value = keyword;
                    sendRequest.delay("0.1", keyword);
                    break;
        }
    }
}
</script>

<script type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/search_suggest_fns.js"></script>




<script type="text/javascript">
createNamespace('TM.Ads');
TM.Ads.iframeAssets = TM.Ads.iframeAssets || [];
</script>

<script type="text/javascript">
if (typeof TM != "undefined" && TM.config) {
    TM.config.media_server = "http://s1.ticketm.net/ln/en-us";
    TM.config.page_type = "microsite_generic";
    TM.config.current_domain = "lu";
}
</script>

<script type="text/javascript" language="javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/date_fix.js" ></script>

<script type="text/javascript">
  var optical_test_preferences = null;
  var is_optical_test_preferences_active = true;
  var lock_concurrent_bba_search_enable = false;
</script>


<script type="text/javascript">
var check_resalePartnerURL;
(function () {
    var resale_disclaimer_config = { partners: null };
    check_resalePartnerURL = function (url) {
        if ( !resale_disclaimer_config.partners || !url || typeof url !== 'string' ) {
            return false;
        }
        var result = __GLOBALS.util.parseURI(url);
        if (!result || !result.host) {
            return false;
        }
        var result_host_lowercase = result.host.replace(/\s*$/, '').toLowerCase();
        var i,
            key,
            values;
        for (key in resale_disclaimer_config.partners) {
            values = resale_disclaimer_config.partners[key].hosts;
            if (!values) {
                continue;
            }
            for (i = 0 ; i < values.length ; i++) {
                if (values[i].toLowerCase() === result_host_lowercase) {
                    return true;
                }
            }
        }
        return false;
    };
})();

</script>

<link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/default.css" rel="stylesheet" type="text/css" />
<link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/carousel.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/lte_ie7_exceptions.css" /><![endif]-->
<!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/lte_ie8_exceptions.css" /><![endif]-->
<!--[if IE ]><link rel="stylesheet" type="text/css" href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/ie_exceptions.css" /><![endif]-->
    <link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/facebook-plugin.css" rel="stylesheet" type="text/css" />




    
   

    
        <link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/micro-default.css" rel="stylesheet" type="text/css" />
        <link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/spotlight-microsite.css" rel="stylesheet" type="text/css" />

    


    






    


    <link href="http://s1.ticketm.net/en-us/css/5c5a09692a0aea647f5a8d2dcd7f5aae/current_look/ln/langoverlay_en-us.css" rel="stylesheet" type="text/css" />

    

<!--[if IE]>
<style>
.ie_has_layout {
    height: 0;
    he\ight: auto;
    zoom: 1;
}
#cat-browse .widget-frame,
#seeEvents .widget-frame { margin-top: 0; }
</style>
<![endif]-->



<script type="text/javascript">
var _satellite = {
  "override": {
    "host": {
      "http": "assets.adobedtm.com",
      "https": "assets.adobedtm.com"
    }
  }
};
</script>
<script src="//assets.adobedtm.com/bbc5bbf56a4c9cda1271b6b9cb3e94744124c05b/satelliteLib-df472949e8a036d72570b7a081d946474e1d4d29.js"></script>



<script type="text/javascript">
    if (writeCapture) {
        writeCapture.autoAsync();
    }
</script>        <script type='text/javascript'>                googletag.cmd.push(function() {

                //enable async
                    googletag.pubads().enableSingleRequest();
                    googletag.pubads().enableAsyncRendering();
                    googletag.pubads().collapseEmptyDivs();

                //Set targeting for all ad slots

                    googletag.pubads().setTargeting("dmaid","0")
                            .setTargeting("lang","en-us")
                            .setTargeting("page","Schlesinger")
                            .setTargeting("brand","0")                            .setTargeting("kuid", (typeof Krux != "undefined" && Krux.user) ? Krux.user : "0")                            .setTargeting("micrositeid","73")                        ;



                                        
                    googletag.pubads().addEventListener('slotRenderEnded', function(event) {
                        jQuery("div.gpt-ad-container iframe").attr("title","Advertisement content");
                        if(event.slot && event.slot.d && event.slot.d.pagepos[0] == 501){
                            var leaderboard = jQuery("#div-gpt-ad-slot-501");
                            if(leaderboard.height() <= 1){
                                leaderboard.hide();
                            }else{
                                leaderboard.addClass('leaderboard-padd');
                            }
                        }
                    });
                    googletag.enableServices();
                });        </script>
</head>
<body id="body" class="" 
>

<noscript>
    <div style="baCkground-color:#FFF3D2; border-bottom:1px solid #E4D199; margin-bottom:15px; padding:10px;" align="center">
    You must set your browser to <a href="http://concerts.livenation.com/h/cookies.html">accept cookies</a> and to <a href="http://concerts.livenation.com/h/javascript.html">enable Javascript</a> in order to access certain functions of this site, including the purchase of tickets.
    </div>
</noscript>

<!-- NFB NOTE: Add order phone number -->
<div class="hideContent">To order tickets by phone, please call Ticketmaster National Sales at 1-800-745-3000. </div><div class="lightbox-shade"></div>

<!-- START LIVENATION HEADER -->
        <!-- LEADERBOARD AD -->
        <div class="leaderboard">        </div>
        <!-- END LEADERBOARD -->
    <!-- HEADER -->
        <script language=javascript>
            <!--
                var my_market = "United States & Canada";
                var location_box_market_name = GetCookie("MARKET_NAME");
            //-->
        </script>
        <div id="site-header" role="banner">
            <div class="frame">
            	<div class="logo">
	            	<a href="http://www.livenation.com/section?tm_link=tm_logo" id="site-logo" title="Live Nation - One Nation Under Music - Concert Tickets and Tour Dates">
	                    <img src="http://s1.ticketm.net/ln/en-us/img/sys/ln-logo-2013.png" alt="Live Nation" /> 
	                </a>
	            </div>
                <ul class="header-links" role="navigation">
                    <li><a class="nfbSkipLink" href="#contentWrap"><span>Skip to main content</span> </a> </li>
                    <li><a href="https://concerts.livenation.com/member?tm_link=tm_ql_1" class="withBar" rel="nofollow">My Live Nation Tickets</a> </li>
                    <li><a class="noTextDecoration" href="http://lntv.com"><img src="http://s1.ticketm.net/ln/en-us/img/sys/lntv-wordmark-color@1x.png" alt="Live Nation TV" /></a></li>
                    <li><a href="http://concerts.livenation.com/h/help.html?tm_link=tm_ql_3">Help</a></li>
                </ul>
	            <div class="welcomeText">
        <span id="shopCart" style="display:none"><a href="https://concerts.livenation.com/mycart?tm_link=tm_header_mycart" class="cart-button"><span class="start-cap"><strong>My Cart</strong><span class="cart-basket-total test2"></span></span><span class="end-cap"></span></a></span>
<script type="text/javascript" language="JavaScript">
//<![CDATA[
{
    var count = GetCookie("MYCART_COUNT") || 0;
    if ( count >= 0 ) {        $$('.cart-basket-total')[0].innerHTML = [ 
            ' (<span class="cart_total_items">', count, '</span>',
            '<span class="hideContent"> items in your cart</span>)'
        ].join('');    }
    else {        $$('.cart-basket-total')[0].innerHTML = '';
    }
    if ($('shopCart')){
        $('shopCart').show();
    }
}
//]]>
</script>
	                <span class="changeLocationContainer">
                        <div id="localizeWrap">        <div id="locationBox" title="Change Location Box" onclick="toggleA('locationBox','locationEx'); return false" class="more">            <div id="location">
                <span id="location_button"><a href="/microsite/settlement" onclick="return false;" id="arrow"></a></span>
                <a href="/microsite/settlement" onclick="return false;" id="change_location">Change Location</a>
                <div class="clear"></div>
            </div location>
        </div locationBox>
        <div class="clear"></div>
        <div id="locationEx" style="display: none">
            <div id="location_menu">
                <div id="locBoxTop"></div>
                <div id="locBoxMid">                <form action="/find_area" method="get" onsubmit="return verifyLocationString(this);">
                    <div class="h3 show">Change Location</div>
                    <div class="spacer7px"></div>
                                        <div class="error mgBot10 txt11" id="location_eror_blank" style="display: none" role="alert">Error: please enter city or zip code.</div>
                                        <div class="error mgBot10 txt11" id="location_eror_multiple" style="display: none" role="alert">We found multiple results matching "<div id="location_results" style="display: inline">keyword</div>".
                        <br>Please choose from the list below                    </div>
                                        <div class="error mgBot10 txt11" id="location_eror_not_found" style="display: none" role="alert">Error: we could not find this location. Please check your entry (city name only or zip code).</div>
                    <div class="clear spacer7px"></div>
                    <label class="hideContent" for="location_input">Enter City or Zip Code</label>
                    <input type="text" name="area" id="location_input" title="Enter City, Zip Code or follow the links below for All Cities or International sites." onFocus="this.select(value='');" onblur="if(this.value == '')this.value=location_text;" value="Enter City or Zip Code" />
                    <input type="image" src="http://s1.ticketm.net/ln/en-us/img/sys/1000/blank.gif"  alt="Submit City or Zip Code" title="Submit City or Zip Code" class="goLg" />
                    <div style="width: 250px; display: none;" class="selectOption" id="location_eror_multiple_dropdown">
                        <div class="scrollBox" id="location_multiple_dropdown"></div>
                    </div><div></div>
                    <ul class="change_location_list">
                    <li><a href="/find_area?uri=73dVDPMQ_GVy97DN3krIKhQtQw_Jgxd0VJqKv7jx-jsA2iqodKtx2ddA2JxtHuWlErOAyDsutfHQsPx5-aOxnzQ_iL9aHhcz5OXX9KJb8SY6dyf6H_8vMCBxFbBQ&tm_link=tm_changeloc_cities">See All Cities</a>&nbsp;&nbsp;|&nbsp;&nbsp;</li>
                    <li><a href="/microsite/settlement" onclick="omniTracking.navigation_link('tm_changeloc_intl',false,'http://www.livenationentertainment.com/map/globalsites/?tm_link=tm_changeloc_intl');return false;">See International</a>&nbsp;&nbsp;</li>
                    <li><span id="location_marker" style="display:none;">|&nbsp;&nbsp;</span>                    <a href="#" class="change_location_close" onfocus="$('location_marker').style.display='';" onblur="$('location_marker').style.display='none';" onclick="toggleA('locationBox','locationEx'); return false">Close</a>                    </li>
                    <li style="clear:both;float:none;"></li>
                    </ul>
                    <input type="hidden" name="tm_link" value="tm_changeloc_go" />
                </form>                </div locBoxMid><div id="locBoxBot"></div>
              </div end location_menu>
             </div>
<script language=javascript>
            <!--
                var location_items = {
                    "Chicagoland & Northern IL": "Chicagoland, Northern IL & Northern Indiana",
                    "Cleveland, Youngstown & More": "Cleveland, Youngstown, Akron & More",
                    "Minneapolis/St. Paul & More": "Greater Minneapolis - Saint Paul Area",
                    "Iowa for LNUS": "Iowa",
                    "Memphis, Little Rock & More": "Memphis, Little Rock, Southhaven, Tupelo, Tunica & More",
                    "Northern New Jersey for LNUS": "Northern New Jersey",
                    "All of Canada": "Canada"
                };

                var my_market = "United States & Canada";

                var enter_to_change_location = "<span class='hideContent'> Enter to change location if needed.</span>";

                var location_box_market_name = GetCookie("MARKET_NAME");
                if( location_box_market_name ) {
                    location_box_market_name = location_box_market_name.base64decode().stripScripts().stripTags();
                }

                var targetElm = jQuery('#locName');
                var market_text = '';
                if( my_market.strip().empty() ) {
                    if( location_box_market_name ) {
                        my_market = location_box_market_name;
                    }
                }
                else if( my_market != location_box_market_name ) {
                    var npdma_c = GetCookie("NPDMA");
                    var ndma_c = GetCookie("NDMA");
                    if( ! ( npdma_c == ndma_c && '' == ndma_c ) && location_box_market_name ) {
                        my_market = location_box_market_name;
                    }
                }

                    market_text = my_market.escapeHTML() + enter_to_change_location;

                targetElm.html(market_text);

                var hover_text = my_market;

                if (location_items[my_market]) {
                    hover_text = location_items[my_market];
                }

                jQuery("#location-button").attr("title", hover_text);
           //-->
        </script>
                        </div><!-- end localizeWrap -->
                    </span>                    <span id="welcome_module" class="welcome-text">
<script language="JavaScript">
var member_name = GetCookie("MNAME");
var cookie_id = GetCookie("MID");
function welcomeMe() {
    if( member_name ) {
        member_name = member_name.stripScripts().stripTags().escapeHTML();
    }
    
    if ( cookie_id == null || cookie_id.length == 0 ) {
        $('welcome_module').update('Welcome.&nbsp;&nbsp;<a href="https://concerts.livenation.com/member?tm_link=tm_header_signin">Sign In</a>');
    }
    else {
        if (window.decodeURI != null) {
            if (member_name.length > 0) {
                member_name = ' ' + member_name;
            }
        }
        $('welcome_module').update('Welcome <strong>' + member_name + '.</strong>&nbsp;&nbsp;<a href="https://concerts.livenation.com/member/logout/?tm_link=tm_header_signout">Sign Out</a>');
    }
}
welcomeMe();
</script>	                </span>
               	            </div>
	    	</div>
        </div>   
    <!-- end of HEADER -->


<a name="nfb_skipNav" id="nfb_skipNav" class="nfbSkipNav" tabindex="-1"></a>
<div id="contentWrap">
  <div class="frame">
    <div id="sidePlacement-wrapper">
       <div class="inline_block" id="sidePlacement" style="display:none;"></div>
    </div>
    <div id="mainContent" role="main" >




<script type="text/javascript">
    var latestSliders = null;
</script>
<script src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/microsite/accordion_tabs.js" type="text/javascript" charset="utf-8"></script>
<div id="microsite">    <section>        <div class="client_content"><a href="#nfb_skip_left_content" class="nfbSkipLink"><span>Skip from left menu to search content</span></a>             
<div class="leftCol"><div id="div-gpt-ad-slot-465" class="mgTop20 gpt-ad-container">    <script type='text/javascript'>            googletag.cmd.push(function() {                    googletag.display('div-gpt-ad-slot-465');            });    </script></div>    
    <div class="spacer20"></div></div><!-- END leftContent -->
<a name="nfb_skip_left_content" id="nfb_skip_left_content" class="nfbSkipLink" tabindex="-1">&nbsp;</a>
            <div class="rightCol">            <!-- SPOTLIGHT -->    <h1>        <div class="pageTitle">Ticket Code Dedicated Site        </div>    </h1><p class="intro">UPDATE JUNE 21 1:35 AM EDT </p><div id="spotLite" class="spotLite">
            <!-- storytemplate 1 is the large image at the top of the page -->            </div>

            <style>
                #modal {
                    background-color:#000000;
                    filter:alpha(opacity=50);
                    -moz-opacity: 0.5;
                    opacity: 0.5;
                    overflow:hidden;
                    position:absolute;
                    z-index:1001;
                    top: 0px;
                    left: 0px;
                }
            </style>
            <div class="clear"></div>            <div class="eventListing_wrap">            <div id="top_anchor"></div>
            <div id="modal" style="display: none;"></div>
            <!-- loading  -->
            <div id="loading_lb" class="loading" style=" display: none;" align="center">                    <div class="legacy-polling-module">
                        <img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/gray75_polling.gif" class="legacy-polling-image" alt="" />
                        <div class="legacy-polling-message">Updating Results...</div>
                    </div>            </div>
            <div id="loading" class="loading" style="display: none;" align="center">                    <div class="legacy-polling-module">
                        <img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/gray75_polling.gif" class="legacy-polling-image" alt="" />
                        <div class="legacy-polling-message">Loading Results...</div>
                    </div>            </div>
            <!-- END loading -->
            <!-- no tickets error message -->
            <div id="nothing_msg" class="searchList" role="alert" style="display: none;">
                <div class="noResult"><span id="nothing_result"></span></div>
            </div>
            <!-- END no tickets error message -->
             <a id="event_listing_top" tabindex="-1" href="#"></a>
            <div id="hdr_national" style="display: none;">
                <h2 class="mgBot5">United States & Canada <span id="count_national" class="count"></span></h2>
                <div class="eventListingHeader" id='thead_national'>
                    <table cellpadding="0" cellspacing="0" border="0">
                        <tr id="row_national">
                            <th class="lft5"></th>
                            <th id="date_national" width="60px" scope="col"><a href="#colMainWrap" onclick="sortResults('date'); return false;"><span class="hideContent">Sort by</span>Date</a>&nbsp;<img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/sort.gif" id="sa_national" /></th>
                            <th id="event_national" width="180px" scope="col"><a href="#colMainWrap" onclick="sortResults('event'); return false;"><span class="hideContent">Sort by</span>Event</a>&nbsp;</th>
                            <th id="loc_national" width="160px" scope="col"><a href="#colMainWrap" onclick="sortResults('loc'); return false;"><span class="hideContent">Sort by</span>Location</a>&nbsp;</th>
                            <th width="107px" scope="col" id="offertype_local">&nbsp;</th>
                            <th></th>
                            <th class="rt10">&nbsp;</th>
                        </tr>
                    </table>
                </div>  
            </div>  
            <div id="no_national_msg" class="offerEventListing  yellowTheme" style="display: none;">
                <div class="noResult"><span id="no_result_national">There are no matching events in</span>&nbsp;<span id="national_market"></span>.</div>
            </div>
            <div class="offerEventListing greyTheme home" id="result_national" style="display: none;">
                 <table width="100%" border="0" cellpadding="0" cellspacing="0">
                 <tbody id="tbl_national">
                 </tbody>
                 </table>
            </div><!-- END national result -->
            <div class="spacer20" id="spc_national" style="display: none;"></div>
            <div id="hdr_domain" style="display: none;">
                <h2 class="mgBot5">Dates Scheduled in Other Countries <span class="count" id="count_domain"></span></h2>
                <div class="eventListingHeader" id='thead_domain'>
                    <table cellpadding="0" cellspacing="0" border="0">
                        <tr id="row_domain">
                            <th class="lft5"></th>
                            <th id="date_domain" width="65px" scope="col"><a href="#colMainWrap" onclick="sortResults('date'); return false;"><span class="hideContent">Sort by</span>Date</a>&nbsp;<img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/sort.gif" id="sa_domain" /></th>
                            <th id="event_domain" width="180px" scope="col"><a href="#colMainWrap" onclick="sortResults('event'); return false;"><span class="hideContent">Sort by</span>Event</a>&nbsp;</th>
                            <th id="loc_domain" width="160px" scope="col"><a href="#colMainWrap" onclick="sortResults('loc'); return false;"><span class="hideContent">Sort by</span>Location</a>&nbsp;</th>
                            <th>&nbsp;</th>
                            <th class="rt10">&nbsp;</th>
                        </tr>
                    </table>
                </div>  
            </div>  
            <div id="result_domain" class="offerEventListing greyTheme home" style="display: none;">
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tbody id="tbl_domain">
                </tbody>
                </table>
            </div><!-- END other domain result -->
            <div class="spacer20" id="spc_domain" style="display: none;"></div>
            <div class="pagi" id="pages" style="display: none;"><strong>Results <span id="pages_count"></span></strong></div>
            <div id="search_error" style="display:none;" role="alert">
                <div id="main_right">
                    <div align="center">
                    <br>
                    <h3>We're sorry, we're unable to process your request. Please try again.</h3>
                    <br>                        <input class="button" value="Return To Previous Page" title="Return To Previous Page" type="button" onclick="self.location='http://concerts.livenation.com';">                    </div>
                </div>
                <div class="clear spacer40"></div>
                <div class="clear"></div>                </div><!-- eventlisting_wap  -->            <div id="no_events_adv" style="display:none; margin: 0 20px"></div>
            </div><!-- Right Column -->
            </section>        </div><!-- End of mainContent -->
    </div><!-- End of frame -->
</div><!-- End of contentWrap --><script type="text/javascript">
    var omniPostMesg = "";
    var no_events;
        no_events = "We did not find any offers.";
    var event_mask_name = "";
    var event_csv_ids = "";
    var event_add_id = "";
    var search_data = new Hash();
    var search_scorebig_data = new Hash();
    var global = new Hash();
        global.set('skey','EventDate');
        global.set('EventName','desc');
        global.set('VenueCity','desc');
        global.set('EventDate','asc');
        global.set('page_max',50);
    var loading_events = false;

    function fireSearch( site_id, args ) {
        var dma_id = '99999';
        var base_url = '/json/search/microsite/event/'; 
        var searchRequests = [];
        TM.MetricsCollection.timings.facade('startTimer', { 
            'name': 'searchResultsLoad_total',
           'mtype': 'web.page.cs_function_execution.timer.millis'
        });
            getSearch(base_url + 'national?site_tmpl=STYLE_C&page_id=721', search_data, 'national', args);
            getSearch(base_url + 'domain?site_tmpl=STYLE_C&page_id=721', search_data, 'domain', args);
            searchRequests.push('national', 'domain');        searchMetricsLoadTotal(searchRequests);
    }
    function searchMetricsLoadTotal(sr) {
         jQuery(document.body).unbind("searchresultsload").bind("searchresultsload", function(event, t) {
            sr = jQuery.grep(sr, function(value) {
                return value != t.searchType;
            });
            //merge search_scorebig_data to search_data

            //merge local data
            var sl = search_data.get("local");
            var ssbl = search_scorebig_data.get("local");
            if(typeof sl == "undefined"){sl = {};}
            if (typeof sl.docs == "undefined") {sl.docs = [];}
            if(typeof ssbl == "undefined"){ssbl = {};}
            if (typeof ssbl.docs == "undefined") { ssbl.docs = [];}
            sl.docs = sl.docs.concat(ssbl.docs);
            sl.numFound = sl.docs.length;

            //merge domain data
            var sd = search_data.get("domain");
            var ssbd = search_scorebig_data.get("domain");
            if(typeof sd == "undefined"){sd = {};}
            if (typeof sd.docs == "undefined") {sd.docs = [];}
            if(typeof ssbd == "undefined"){ssbd = {};}
            if (typeof ssbd.docs == "undefined") { ssbd.docs = [];}
            sd.docs = sd.docs.concat(ssbd.docs);
            sd.numFound = sd.docs.length;

            //merge national data
            var sn = search_data.get("national");
            var ssbn = search_scorebig_data.get("national");
            if(typeof sn == "undefined"){sn = {};}
            if (typeof sn.docs == "undefined") {sn.docs = [];}
            if(typeof ssbn == "undefined"){ssbn = {};}
            if (typeof ssbn.docs == "undefined") { ssbn.docs = [];}
            sn.docs = sn.docs.concat(ssbn.docs);
            sn.numFound = sn.docs.length;

            search_data.set("local", sl);
            search_data.set("domain", sd);
            search_data.set("national", sn);
            search_data.set("total", sl.numFound + sd.numFound + sn.numFound);
            search_data.set("total_docs", sl.numFound + sd.numFound + sn.numFound);
            //end merge data

            //sort data by date
            global.set('EventDate','desc');
            sortResults('date');

            if(!sr.length) {
                TM.MetricsCollection.timings.facade('endTimer', { 
                       'name': 'searchResultsLoad_total',
                   'function': (search_data.get('response_errors') && search_data.get('response_errors') == 1)? 'searchResultsLoad_total_err': 'searchResultsLoad_total',
                      'force': true
                });
            }
        });
    }
    
    function fireOmni(gl){
        if(tm_omni_temp.get('firstLoadSet')){tm_omn.prop14=prop14;}else{tm_omni_temp.set('firstLoadSet','1')}
            $w('pageName prop16').each( function(cl){
                tm_omn[cl] = tm_omn[cl] + omniPostMesg;
            });
            tm_omn.t();
            omniPostMesg = "";
    }
    function initLoad( site_id, args ) {
        TM.MetricsCollection.timings.facade('startTimer', { 
            'name': 'searchResultsDisplay',
           'mtype': 'web.page.cs_function_execution.timer.millis'
        });
        
        loading_events = true;
        updateLoader();
        //clear original data, this section is latest

        if($('thead_local')) $('thead_local').show();
        if($('no_local_msg')) $('no_local_msg').hide();
        if($('no_national_msg')) $('no_national_msg').hide();
        if($('nothing_msg')) $('nothing_msg').hide();
        if($('search_error')) $('search_error').hide();
        if($('pages')) $('pages').hide();
        $w('national domain').each( function(d){
            if($('hdr_' + d)) $('hdr_' + d).hide();
            if($('result_' + d)) $('result_' + d).hide();
            if($('spc_' + d)) $('spc_' + d).hide();
            $("tbl_" + d).childElements().invoke('remove');
        });
        //end this section
        search_data.set('total', 0);
        search_data.set('total_docs', 0);
        search_data.set('response_errors', 0);
        fireSearch( site_id, args );
        var start_time = new Date().getTime();
        var requestCheck = new PeriodicalExecuter(
            function(pe) {
                var end_time = new Date().getTime();
                if( ( (end_time - start_time) / 1000 ) >= 30 || ( search_data.get('response_errors') && search_data.get('response_errors') == 1 ) ) {
                    pe.stop();
                    $('loading').hide();
                    $('modal', 'loading_lb').invoke('hide');
                    $('search_error').show();
                    var errMes = ((end_time - start_time) / 1000 ) >= 30 ? "err_timeout": "err_xhr";
                    jQuery(document.body).trigger("searchresultsdisplay", [{"status": errMes}]);
                    no_event_omniture();
                    loading_events = false;
                    return;
                }
                if( Ajax.activeRequestCount == 0 ) {
                    pe.stop();
                    if( search_data.get('total') == 0 && search_data.get('total_docs') == 0 ) {
                        $('loading').hide();
                        $('modal', 'loading_lb').invoke('hide');
                        $('nothing_msg').show();
                        jQuery(document.body).trigger("searchresultsdisplay", [{"status": "no_results"}]);
                        no_event_omniture();                        loading_events = false;
                        return;
                    }
                    else {
                        tm_omn.channel = "LN_US: Microsite";
                        tm_omn.pageName = "LN_US: Microsite: Schlesinger Microsite: Home";
                        tm_omn.prop16 = "LN_US: Microsite: Schlesinger Microsite: Home";
                        tm_omn.prop1 = "LN_US: Microsite: Schlesinger Microsite: Home";
                        tm_omn.prop2 = "LN_US: Microsite";
                        tm_omn.eVar2 = "LN_US: Microsite";
                        tm_omn.prop3 = "LN_US: Microsite: Schlesinger Microsite";
                        tm_omn.eVar3 = "LN_US: Microsite: Schlesinger Microsite";
                        tm_omn.prop17 = "LN_US";
                        tm_omn.prop33 = "http://concerts.livenation.com/microsite/settlement";
                        tm_omn.eVar59 = "http://concerts.livenation.com/microsite/settlement";
                        global.set('pages', new SearchPages() );
                        new EventList( global.get('pages') ).drawEvents();
                        fireOmni();
                        $('loading').hide();
                        $('modal', 'loading_lb').invoke('hide');
                        loading_events = false;
                    }
                }
            }, 0.25
        );
        
        jQuery(document.body).unbind("searchresultsdisplay").bind("searchresultsdisplay", function(event, d) {
            var st =  (d && d.status)? "_" + d.status : "";
            TM.MetricsCollection.timings.facade('endTimer', { 
                    'name': 'searchResultsDisplay', 
                'function': 'searchResultsDisplay' + st,
                   'force': true
            });
        });
    }
    var meta_dcsuri;
    function load_data() {
        if(loading_events) {
            return;
        }
        $('nothing_result').update(no_events);
        $('national_market').update('');
        jQuery(document.body).trigger("searchresultsdisplay", [{"status": "no_results"}]);
    }
    function no_event_omniture(){
        var custLinkSearchErr = new omniCustomClick({
            channel : "LN_US: Microsite ", 
            pageName : "LN_US: Microsite: Schlesinger Microsite: Home",
            prop1 : "LN_US: Microsite: Schlesinger Microsite: Home",
            prop2 : "LN_US: Microsite",
            eVar2 : "LN_US: Microsite",
            prop3 : "LN_US: Microsite: Schlesinger Microsite",
            eVar3 : "LN_US: Microsite: Schlesinger Microsite",
            prop16 : "LN_US: Microsite: Schlesinger Microsite: Home",
            prop17 : "LN_US",
            prop33 : "http://concerts.livenation.com/microsite/settlement",
            eVar59 : "http://concerts.livenation.com/microsite/settlement"
            },
            clickLink = ' ',
            newPage = true
        );
        custLinkSearchErr.handleClick();
    }  
    Event.observe(window,'load',function(){
        load_data();
            initLoad('721', '');
    }); 
    Event.observe(window,'unload',function(){
        search_data = null;
    });
</script>
<script language="JavaScript">
    var EventList = Class.create({
        initialize: function() {
            this.pages = arguments[0];
        },
        drawEvents: function() {
            if($('no_local_msg')) $('no_local_msg').hide();
            if($('no_national_msg')) $('no_national_msg').hide();
            if($('nothing_msg')) $('nothing_msg').hide();
            $w('national domain').each( function(d){
                if($('hdr_' + d)) $('hdr_' + d).hide();
                if($('result_' + d)) $('result_' + d).hide();
                if($('spc_' + d)) $('spc_' + d).hide();
                $("tbl_" + d).childElements().invoke('remove');
            });

            if( this.pages.stack.length ) {
                // we have multiple pages, build the current one
                var current = this.pages.stack[ global.get('pages').current ];
                current.each( function(p,idx){
                    var tmp = p.split(':');
                    this.buildEvents( search_data.get( tmp[0] ).docs[tmp[1]], tmp[0], idx );
                }.bind(this) );
                this.buildCounts( current );
                jQuery(document.body).trigger("searchresultsdisplay", [{"status": "success"}]);
            }
            else {
                //no pages, just build all
                $w('national domain').each( function(s){
                    search_data.get( s ).docs.each( function(d,idx){
                        this.buildEvents( d, s, idx );
                    }.bind(this));
                    if( global.get('pages').types.include( s ) ) {
                        $('count_' + s).update( '(' + search_data.get(s).docs.length + ')' );
                    }
                }.bind(this));
            }
            $w('national domain').each( function(s) {
                if($('tbl_' + s).firstDescendant()) $('tbl_' + s).firstDescendant().addClassName('firstRow');

            });
            noLocal();            jQuery(document.body).trigger("searchresultsdisplay", [{"status": "success"}]);
        },
        buildCounts: function( current ) {
            var min = current.first().split(':');
            var max = current.last().split(':');
            min[1] = parseInt( min[1] ) + 1;
            max[1] = parseInt( max[1] ) + 1;
            if( min[0] == max[0] ) {
                $('count_' + min[0]).update( '(' + min[1] + ' - ' + max[1] + ' of ' + search_data.get( min[0] ).docs.length + ')' );
            }
            else {
                var tmp_h = $H();
                current.each( function(c){
                    var key = c.split(':').first();
                    tmp_h.set( key, new Array() );
                    
                });
                current.each( function(c){
                    var key = c.split(':').first();
                    var val = c.split(':').last();
                    var tmp_val = tmp_h.get( key );
                    tmp_val.push( val.toString() );
                    tmp_h.set( key, tmp_val );
                });
                tmp_h.keys().each( function(k){
                    var tmp = tmp_h.get(k);
                    var d_length = search_data.get( k ).docs.length;
                    if( tmp.length == d_length ) {
                        $('count_' + k).update( '(' + d_length + ')' );
                    }
                    else {
                        var min = parseInt( tmp_h.get(k).first() ) + 1;
                        var max = parseInt( tmp_h.get(k).last() ) + 1;
                        $('count_' + k).update( '(' + min + ' - ' + max + ' of ' + d_length + ')' );
                    }
                });
            }
        },
        buildEvents: function( d, type, idx ) {
            var r = new Element('tr');
            r.setAttribute('itemscope', 'itemscope');
            r.setAttribute('itemtype', 'http://schema.org/Event');
            var event_count = search_data.get(type).docs.length;
            var td = new Element('td',{'class':'ltpd5'});
            var img = new Element('img',{'width':"1", 'src':'http://s1.ticketm.net/ln/en-us/img/sys/1000/blank.gif', 'alt':''});
            td.appendChild( img ) ;
            r.appendChild( td );
            $w('date event location offer_type  more').each( function(c) {
                var td = new Element('td',{'class':c});
                var div = new Element('div');
                if(c != 'date') div.addClassName('padL10');
                if(c == 'location') div.addClassName('venue_height');
                switch( c ) {
                    case 'event':
                        td.setAttribute("width","200");
                        var act = '';
                        var hidden_span = new Element('span',{'style':'display:none'});
                        var link = purchaseLink({ event : { event_id : d.EventId, event_seo_link : d.EventSEOName, system_url : d.PostProcessedData.system_url, system_url_unencoded : d.SystemURL, link_text : d.PostProcessedData.PollingLinkText, link_status : d.PostProcessedData.PollingLinkStatus }, artist_id : d.AttractionId.first(), major_id : d.MajorGenreId, minor_id : d.MinorGenreId, purchase_domain: d.PurchaseDomain, link_class : 'findTix', page_type : 'microsite', mask_presale_status : d.MaskPresaleStatus, mask_presale_on : d.MaskPresaleOn, mask_presale_off : d.MaskPresaleOff, onsale : d.PostProcessedData.Onsales, venue_id : d.VenueId, PR : {event_id : d.EventId, artist_id : d.AttractionId.first(), artist_name : d.EventName }, pagename: d.pagename || '', itemprop : 'itemprop\=\"offers\"', promo_did :  "" });
                        hidden_span.innerHTML = link;
                        var link_url = $(hidden_span).firstChild.href ? $(hidden_span).firstChild.href : "http://concerts.livenation.com' + d.AttractionSEOLink.first() + '";
                        if( d.MinorGenreId && sport.get( d.MinorGenreId ) && d.AttractionName.length > 1 ) {
                            act = '<a class="event" itemprop="url" href="' + link_url + '"><span itemprop="name performers">' + d.AttractionName.first() + '</span>&nbsp;vs. '  + d.AttractionName[1] + '</a>';
                            if( d.ActOverride ) {
                                act = '<a class="event" href="' + link_url + '"><span itemprop="name performers">' + d.EventName + '</span></a>';
                            }
                        }
                        else {
                            act = '<a class="event" itemprop="url" href="' + link_url + '" ><span itemprop="name performers">' + d.EventName + '</span></a>';
                        }
                        div.innerHTML = act;
                        div.appendChild( hidden_span );
                        break;
                    case 'location':
                        td.setAttribute("width","170");
                        var is_cancelled = '';
                        var is_date_message = '';
                        if( d.TBA ) {
                            is_date_message += "Date TBA";
                        }
                        else if( d.MDT ) {
                            is_date_message += "Multiple Dates and Times";
                        }
                        else if( d.PostProcessedData.Onsales.event_date.date_range ) {
                            var tmp = d.PostProcessedData.Onsales.event_date.date_range;
                            if( tmp.start != tmp.end ) {
                                is_date_message += tmp.start.split('<br>')[0] + ' - ' + tmp.end.split('<br>')[0];
                            }
                            else {
                                is_date_message += tmp.start;
                            }
                        }
                        if( d.Canceled ) {
                            is_cancelled = '<span class="errorMessage">Canceled</span><br/>';
                        }
                                            var venue_loc = d.VenueCityState;
                    
                                        
                        var is_date_message_display = is_date_message ? is_date_message : Object.isUndefined(d.LocalEventDateDisplay.split('<br>')[1]) ? '' : d.LocalEventDateDisplay.split('<br>')[1];
                        div.innerHTML =  is_cancelled + '<span itemprop="location"><strong>' + d.VenueName + '</strong><br/>' + venue_loc +  '</span><br />' + is_date_message_display;
                        td.addClassName('venue');
                        break;
                    case 'date':
                        var date = '';
                        td.setAttribute("scope","row");
                        if(d.TBA || d.PostProcessedData.Onsales.event_date.date_range || d.MDT) {
                            date += '<div class="month">&nbsp;</div><div class="date"><img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/attraction/tba_date.gif" alt="Info" title="Info"></div><div class="day mgBot10">&nbsp;</div>';
                            if (!d.TBA && !d.MDT && d.PostProcessedData.Onsales.event_date.date_range && d.EventRangeStart) {
                                date += '<time itemprop="startDate" datetime="'+ d.PostProcessedData.LocalEventRangeStart +'"></time>';
                            }
                        }
                        else {
                            date += '<div class="month"><span class="dots">&#149;</span> <abbr title="'+ d.LocalEventMonthYear.replace(/\s\d*/g,'') +'">' + d.LocalEventShortMonth + ' </abbr> <span class="dots">&#149;</span></div><div class="date">' + d.LocalEventDay + '</div><div class="day"> <abbr title="' + d.LocalEventWeekdayString +'">' + d.LocalEventShortWeekday  + '</abbr></div><time itemprop="startDate" datetime="'+ d.PostProcessedData.LocalEventDate +'"></time>';
                        }

                        div.innerHTML = date;
                        break;
                    case 'offer_type':                            td.setAttribute("width","107");                        var offer_type = d.OfferDescription || '&nbsp;';                        div.innerHTML = offer_type;
                        break;
                    default:                        td.setAttribute("width","128");                        td.setAttribute("align","right");
                            var link = purchaseLink({ event : { event_id : d.EventId, system_url : d.PostProcessedData.system_url, system_url_unencoded : d.SystemURL, link_text : d.PostProcessedData.PollingLinkText, link_status : d.PostProcessedData.PollingLinkStatus }, artist_id : d.AttractionId.first(), major_id : d.MajorGenreId, minor_id : d.MinorGenreId, purchase_domain: d.PurchaseDomain, link_class : 'findTix', page_type : 'microsite', mask_presale_status : d.MaskPresaleStatus, mask_presale_on : d.MaskPresaleOn, mask_presale_off : d.MaskPresaleOff, onsale : d.PostProcessedData.Onsales, venue_id : d.VenueId, PR : {event_id : d.EventId, artist_id : d.AttractionId.first(), artist_name : d.EventName }, pagename: d.pagename || '', itemprop : 'itemprop\=\"offers\"', promo_did :  "" });
                        div.innerHTML = link;
                }
                td.appendChild( div );
                r.appendChild( td );
            });
            var td = new Element('td',{'class':'rt10'});
            td.update('&nbsp;');
            r.appendChild( td );
            $('tbl_' + type).appendChild( r );
            if($('hdr_' + type)) $('hdr_' + type).show();
            if($('result_' + type)) $('result_' + type).show();
            if($('spc_' + type)) $('spc_' + type).show();
        }
    });

    var SearchPages = Class.create({
        initialize: function() {
            this.current = 1;
            this.prev = 0;
            this.next = 2;
            this.stack = $A();
            this.types = $A();
            this.page_max = global.get('page_max');
            this.results_max = 2000;
            this.max_pages = Math.ceil( this.results_max / this.page_max );
            this.total_docs = search_data.get('total');
            this.total_real_docs = search_data.get('total_docs') <= this.results_max ? search_data.get('total_docs') : this.results_max;
            this.total_pages = Math.ceil( this.total_real_docs / this.page_max );

            if( this.total_pages > 1 ) {
                $w('national domain').each( function(d){
                    if(  search_data.get(d).docs.length ) {
                        this.types.push( d );
                    }
                    for( i = 0 ; i < search_data.get(d).docs.length ; i++ ) {
                        this.stack.push( d + ':' + i );
                    }
                }.bind(this));
                this.stack = this.stack.eachSlice( this.page_max );
                this.stack.splice(0,0,undefined);
                this.drawPageNav();
            }
            else {
                $w('national domain').each( function(d){
                    if( search_data.get(d).docs.length ) {
                        this.types.push( d );
                    }
                }.bind(this));
                var count_html = "1 - " + this.total_docs + " of " + this.total_docs;
                $('pages_count').innerHTML = count_html;
                if( $('filter_txt') ) {
                    $('filter_txt').hide();
                }
            }
            if(this.total_pages > 0) $( 'pages').show();
            tm_omni_temp.set('search_results_total',this.total_docs);
        },

        drawPageNav: function() {
            var output = ((this.current - 1) * this.page_max + 1) + ' - ';
            if( this.current != this.total_pages ) {
                output += (this.page_max * this.current);
            }
            else {
                if( this.total_docs < this.total_real_docs ) {
                        output += this.total_docs;
                    }
                    else {
                        output += this.total_real_docs;
                    }
            }
            output += ' of ' + this.total_docs;

            if( this.total_pages > 1 ) {
                var prevB = ' &nbsp;&nbsp; <a href="#colMainWrap" onclick="prevPage();"><img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/blank.gif" class="prev" /><span class="hideContent">Go to previous page</span></a> &nbsp;&nbsp;';
                var nextB = '<a href="#colMainWrap" onclick="nextPage();"><img src="http://s1.ticketm.net/ln/en-us/img/sys/1000/blank.gif" class="next" /><span class="hideContent">Go to next page</span></a>';
                if( this.prev > 0 ) {
                    output += prevB;
                }
                else {
                    output += '&nbsp;&nbsp;';
                }
                for( p = 1 ; p <= this.total_pages ; p++ ) {
                    if( p == this.current ) {
                        output += p + ' &nbsp;&nbsp; ';
                    }
                    else {
                        output += '<a href="#colMainWrap" onclick="xPage(' + p + ');"><span class="hideContent">Go to page</span>' + p + '</a> &nbsp;&nbsp; ';
                    }
                }
                if( this.next <= this.total_pages ) {
                    output += nextB;
                }
            }
            $('pages_count').update( output );

            if( this.current == this.total_pages && this.total_pages > 1 && this.current == this.max_pages ) {
                if( !$('filter_txt') ) {
                    $('pages').insert({ 'before' : '<div class="pad15 border_all txtCnt mgBot10" id="filter_txt"><strong>Our site currently only displays up to 2000 listings.</strong></div>'});
                }
                else {
                    $('filter_txt').show();
                }
            }
            else {
                if( $('filter_txt') ) {
                    $('filter_txt').hide();
                }
            }
        },

        nextPage: function() {
            if( this.next <= this.total_pages ) {
                this.prev = this.current;
                this.current = this.next;
                this.next++;
                return true;
            }
            else {
                return false;
            }
        },
        prevPage: function() {
            if( this.prev > 0 ) {
                this.prev--;
                this.current--;
                this.next--;
                return true;
            }
            else {
                return false;
            }
        },
        xPage: function( pos ) {
            this.current = pos;
            this.prev = pos - 1;
            this.next = pos + 1;
            return true;
        }
    });

    function sortAlpha( a,b ) {
        var sort_key = global.get('skey');
        if( global.get(sort_key) == 'desc' ) {
            if( b[sort_key] < a[sort_key] ) {
                return -1;
            }
            if( b[sort_key] > a[sort_key] ) {
                return 1;
            }
        }
        else {
            if( a[sort_key] < b[sort_key] ) {
                return -1;
            }
            if( a[sort_key] > b[sort_key] ) {
                return 1;
            }
        }
        return 0;
    }
    function sortResults( sType, init_load) {
        init_load = init_load || false;
        var sorder;
        var img_src;
        switch( sType ) {
            case "event":
                global.set('skey','EventName');
                sorder = 'EventName';
            break;
            case "loc":
                global.set('skey','VenueCity');
                sorder = 'VenueCity';
            break;
            case "date":
                global.set('skey','EventDate');
                sorder = 'EventDate';
            break;
        }
        if( global.get(sorder) == 'desc' ) {
            global.set( global.get('skey'), 'asc' );
            img_src = 'http://s1.ticketm.net/ln/en-us/img/sys/1000/sort.gif';
        }
        else {
            global.set( global.get('skey'), 'desc' );
            img_src = 'http://s1.ticketm.net/ln/en-us/img/sys/1000/sort_up.gif';
        }

        $w('national domain').each(
                function(k) {
                    if( search_data.get(k).docs.length ) {
                        $('sa_' + k).src = img_src;
                        $( sType + '_' + k ).insert( {'bottom':$('sa_' + k)} );
                        search_data.get(k).docs.sort(sortAlpha);
                    }
                }
            );

        xPage(1, init_load, sType);
    }
    function nextPage() {
        if( global.get('pages').nextPage() ) {
            TM.MetricsCollection.timings.facade('startTimer', {
                'name': 'searchResultsPagination_next',
               'mtype': 'web.page.cs_function_execution.timer.millis'
            });
            
            new EventList( global.get('pages') ).drawEvents();
            global.get('pages').drawPageNav();
           
            TM.MetricsCollection.timings.facade('endTimer', {
                 'name': 'searchResultsPagination_next'
            });
        }
        $('top_anchor').scrollTo();
    }
    function prevPage() {
        if( global.get('pages').prevPage() ) {
            TM.MetricsCollection.timings.facade('startTimer', {
                'name': 'searchResultsPagination_prev',
                'mtype': 'web.page.cs_function_execution.timer.millis'
            });
            
            new EventList( global.get('pages') ).drawEvents();
            global.get('pages').drawPageNav();
            
            TM.MetricsCollection.timings.facade('endTimer', {
                'name': 'searchResultsPagination_prev'
            });
        }
        $('top_anchor').scrollTo();
    }
    function xPage( p, init_load, sType ) {
         var mName = (sType)? "searchResultsSort_" + sType : 'searchResultsPagination_xpage';
         
        if( global.get('pages').xPage(p) ) {
            TM.MetricsCollection.timings.facade('startTimer', {
                'name': mName,
                'mtype': 'web.page.cs_function_execution.timer.millis'
            });
           
            new EventList( global.get('pages') ).drawEvents();
            global.get('pages').drawPageNav();
           
            TM.MetricsCollection.timings.facade('endTimer', {
                'name': mName
            });
        }
        if(init_load) {
            $('body').scrollTo();
        }
        else {
            $('top_anchor').scrollTo();
        }
    }
    function updateLoader() {
        if($('no_local_msg')) $('no_local_msg').insert({'after':$('loading')});
        $('loading').show();
    }
    function advEventList() {
        var tbl;
        var no_events_adv = document.getElementById('no_events_adv');
        if ( $('tbl_local') && $('tbl_local').rows.length && ( $('tbl_local').rows.length >= 5 || !($('tbl_national')) )){
            tbl = $('tbl_local');
        }
        $w("national domain").each( function (s) { if (!tbl && $('tbl_' + s) && $('tbl_' + s).rows.length) { tbl = $('tbl_' + s); }})
        if ( tbl ) {
            var index = tbl.rows.length < 5 ? tbl.rows.length : 5;
            var rw = tbl.insertRow(index);
            var cell = rw.insertCell(0);
            cell.setAttribute( "style", "padding-left: 16px;" );
            cell.setAttribute( "colspan", "7" )
            cell.innerHTML = '<div id="div-gpt-ad-slot-463" style="width:600px;"></div>';
        }
        else {
            no_events_adv.innerHTML = '<div id="div-gpt-ad-slot-463" style="width:600px;"></div>';
            no_events_adv.style.display = 'block';
        }
        googletag.cmd.push(function(){ googletag.display('div-gpt-ad-slot-463'); });
    }
    function noLocal() {
        if( true && global.get('pages').current == 1 ) {
            if(!global.get('pages').types.include('national')) {
                $('spc_national').show();
                $('hdr_national').show();
                $('national_market').update('United States & Canada');
                $('thead_national').hide();
                $('no_national_msg').show();
                $('count_national').update( '(0)' );
            }
        }
        if( false && global.get('pages').current == 1 ) {
            if( !global.get('pages').types.include('local') ) {
                $('hdr_local').show();
                $('thead_local').hide();
                $('no_local_msg').show();
                $('spc_local').show();
                $('count_local').update( '(0)' );
            }
        }
    }

    var sport = $H({  });
    var date_string_format = '%m/%d/%Y';
</script>
<script type="text/javascript">

function genProps_purchaseLink (dObj) {
    var just_href,
        just_onclick,
        just_target;

    var current_domain = 'lu';

    var brand_id = dObj.brand_id || '';
    var artist_id = dObj.artist_id || '';
    var venue_id = dObj.venue_id || '';
    var minor_cat_id = dObj.minor_id || '';
    var major_cat_id = dObj.major_id || '';
    var p_did = dObj.promo_did ? '&did=' + dObj.promo_did : '';

    var brand_link = '';
    var tm_link = '';

    var i;

    

    if (!dObj.link_name) {
        if (dObj.page_type == 'microsite') {
            var micro_ac_link = '';
            var ms_page_name = '';
            
            if (dObj.pagename) {
                micro_ac_link = '&ac_link=ms_home_event_' + dObj.pagename;
            } else {
                micro_ac_link = '&ac_link=ms_home_event_Schlesinger';
            }
            ms_page_name = 'link';
            
            tm_link = '&tm_link=ms_home_event_'+ ms_page_name + micro_ac_link;
        }

        if (dObj.page_type == 'amex') {
            if (dObj.event.event_type == 'ES') {
                tm_link = '&tm_link=amex_PrefSeating_Event';
            } else {
                tm_link = '&tm_link=amex_Presale_Event';
            }
        } else if (dObj.page_type != 'microsite') {
            if (dObj.onsale.onsale_status == 1) {
                if (dObj.tm_link) {
                    tm_link = "&tm_link=" + dObj.tm_link.find_tickets;
                }
            } else if ( dObj.onsale.onsale_status == 2 || dObj.onsale.onsale_status == 3 ) {
                if (dObj.tm_link) {
                    tm_link = "&tm_link=" + dObj.tm_link.more_info;
                }
            }
        }
    }

    if (brand_id && brand_id == 'uk_solt') {
        just_href = 'http://www2.ticketmaster.co.uk/cgi/asp_events/byid_redirect.asp?event_id=' + dObj.event.event_id + '&brand=uk_solt' + tm_link;
        just_onclick = '';
        just_target = '';    } else if (dObj.event.system_url) {
        var valid_partner = false;
        var q_params = tm_link;
        if (dObj.purchase_domain) {
            if (brand_link || p_did) {
                q_params += '&' + brand_link + p_did;
            }
            valid_partner = true;
        } else {
            var url = dObj.event.system_url_unencoded.toLowerCase();
            if (url) {
                var queue;
                if (current_domain == 'au') {
                    queue = ['ticketing.ticketmaster.com.au'];
                } else if (current_domain == 'us') {
                    queue = ['ticketweb'];
                } else {
                    queue = tm_omni_temp.get(current_domain + '_h');
                }
                if (queue) {
                    for (i = 0 ; i < queue.length ; i++) {
                        if (url.indexOf(queue[i]) !== -1) {
                            valid_partner = true;
                            break;
                        }
                    }
                }
            }
        }

        var pr_postpend = '';
        if (dObj.PR) {
            pr_postpend = "&eventid=" + dObj.PR.event_id + "&artistid=" + dObj.PR.artist_id + "&artistname=" + dObj.PR.artist_name;
        }            var pl_list,
                pl_item,
                crosssite_var,
                query_params;
            pl_list = ['wt.mc_id', 'CAMEFROM', 'ac_link', 'merchclick'];
            query_params = __GLOBALS.util.parseAndDecodeURIQuery( location.search.substr(1) );
            for (i = 0 ; i < pl_list.length ; i++) {
                pl_item = pl_list[i];
                if (dObj.page_type != 'microsite' || pl_item != 'ac_link') {
                    crosssite_var = query_params[pl_item] ? query_params[pl_item] : GetCookie(pl_item);
                    if (crosssite_var) {
                        pr_postpend += "&" + (pl_item == 'wt.mc_id' ? 'cid' : pl_item) + "=" + crosssite_var;
                    }
                }
            }
        if (valid_partner) {
            pr_postpend += "&crosssite=LN_US:" + artist_id + ":" + venue_id;
        }
        just_href = 'http://concerts.livenation.com/partner_redirect?v=' + encodeURIComponent( dObj.event.system_url ) + q_params + pr_postpend;
        just_onclick = 'window.open(this.href, this.target); return false;';
        just_target = '_blank';
    } else if (dObj.venue_artist) {
        just_href = 'http://concerts.livenation.com/venueartist/' + dObj.venue_artist.url + '?artistid=' + artist_id + '&minorcatid=' + minor_cat_id + brand_link + '&date=' + dObj.venue_artist.date + tm_link;
        just_onclick = '';
        just_target = '';
    } else {
        just_href = 'http://concerts.livenation.com/' + dObj.event.event_seo_link + '/event/' + dObj.event.event_id + '?artistid=' + artist_id + '&majorcatid=' + major_cat_id + '&minorcatid=' + minor_cat_id + brand_link + p_did + tm_link;
        just_onclick = '';
        just_target = '';
    }

    if (dObj.link_utm_postfix) {
        just_href += dObj.link_utm_postfix + '&has_utm=1';
    }

    return { href:just_href ,onclick:just_onclick, target:just_target };
};

function purchaseLink( dObj ) {
    var linkProps = genProps_purchaseLink(dObj);
    var link_href = linkProps.href ? ' href="' + __GLOBALS.util.htmlEscape(linkProps.href) + '"' : '';
    var link_target = linkProps.target ? ' target="' + linkProps.target + '"' : '';
    var link_onclick = linkProps.onclick ? ' onclick="' + linkProps.onclick + '"' : '';

    var i;
    var the_link = '';
    var link_name = dObj.link_name;
    var action_is_more_info = false;
    var link_class = dObj.link_class || '';
    var link_suffix = "";
    var link_subhead = [];
    var use_sub = false;
    var event_text = '';
    var margin_class = '';
    var margin_applied = false;

    var brand_id = dObj.brand_id || '';
    var onsales;

    var rich_snippets_itemprop = dObj.itemprop || '';
    var ariatxt = dObj.aria && dObj.aria.describedby ? ' aria-describedby="' +dObj.aria.describedby+ '" ' : '';

    

    var org_hash = {
        'other' : {
             org_id : 14,
            hop_txt : 'on Partner Site'
        },
    12 : {
             org_id : 11,
            hop_txt : 'on Live Nation'
        },
    1 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    2 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    3 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    4 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    5 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    6 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    7 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    8 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    9 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    10 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        },
    11 : {
             org_id : 12,
            hop_txt : 'on Ticketmaster'
        }
    
    };

    if ( !link_name ) {
        if (dObj.calendar) {
            if (dObj.calendar.mtd_tba) {
                link_suffix = '<span class="pointRt">&#9658;</span>';
                link_class = 'highlight';
            } else {
                link_suffix = "";
                link_class = '';
            }
        }
        if (dObj.page_type == 'artist' || dObj.page_type == 'amex' || dObj.page_type == 'member') {
            link_suffix = '<span class="pointRt">&#9658;</span>';
        }
        if (dObj.page_type == 'microsite') {
            link_suffix = '&nbsp;';
        }
        if (dObj.page_type == 'browse') {
            link_class = 'more';
        } else if ( link_class == '' ) {
            link_class = 'findTickets';
        }

        if (dObj.page_type == 'member') {
            link_suffix = '<span class="pointRt">&#9658;</span>';
        }
            var tu_findTickets = "Find Tickets";
        if (dObj.page_type == 'amex') {
            if (dObj.event.event_type == 'ES') {
                link_name = tu_findTickets + link_suffix;
                action_is_more_info = false;
            } else {
                onsales = dObj.onsale.presales[0];
                if (dObj.onsale.presale_status == '2') {
                    link_name = "More Info" + link_suffix;
                    action_is_more_info = true;
                    link_subhead.push('presale begins:<br />' + onsales.interval.start);
                } else if (dObj.onsale.presale_status == '1') {
                    link_name = tu_findTickets + link_suffix;
                    action_is_more_info = false;
                    link_subhead.push('presale ends:<br />' + onsales.interval.end);
                }
            }
        } else if (dObj.page_type == 'microsite') {
            if (dObj.onsale.onsale_status == 1) {
                link_name = tu_findTickets + link_suffix;
                action_is_more_info = false;
                onsales = dObj.onsale.onsales[0];
                if (onsales && onsales.onsale_type == "2") {
                    if (dObj.mask_presale_status == 'PRESALE_FUTURE') {
                        if (dObj.mask_presale_on) {
                            link_name = "More Info" + link_suffix;
                            action_is_more_info = true;
                            link_subhead.push('presale begins:<br />' + dObj.mask_presale_on);
                        }
                    } else {
                        if (dObj.mask_presale_off) {
                            link_subhead.push('presale ends:<br />' + dObj.mask_presale_off);
                        }
                    }
                }
            } else if (dObj.onsale.onsale_status == 2) {
                link_name = "More Info" + link_suffix;
                action_is_more_info = true;
                onsales = dObj.onsale.onsales[0];
                if (onsales && onsales.onsale_type == "2") {
                    if (dObj.mask_presale_on) {
                        link_subhead.push('presale begins:<br />' + dObj.mask_presale_on);
                    }
                }
                if ( !onsales || onsales.suppress ) {
                    link_subhead.push('currently not on sale');
                }
            } else if (dObj.onsale.onsale_status == 3) {
                link_name = "More Info" + link_suffix;
                action_is_more_info = true;
                link_subhead.push('currently not on sale');
            }
        } else {
            if (dObj.onsale.onsale_status == 1) {
                link_name = tu_findTickets + link_suffix;
                action_is_more_info = false;
                
                if (dObj.purchase_domain != '12' && dObj.page_type == 'member') {
                    event_text = '<strong>on Ticketmaster</strong>';
                }
                
            } else if (dObj.onsale.onsale_status == 2) {
                link_name = "More Info" + link_suffix;
                action_is_more_info = true;
                use_sub = true;
            } else if (dObj.onsale.onsale_status == 3) {
                link_name = "More Info" + link_suffix;
                action_is_more_info = true;
                link_subhead.push('currently not on sale');
            }
        }
    }
    if (typeof dObj.action_is_more_info !== 'undefined') {
        action_is_more_info = dObj.action_is_more_info;
    }

    

    if (brand_id && brand_id == 'uk_solt') {
        the_link = '<a' + link_href + link_target + link_onclick + ' class="'+ link_class + '" id="pl_' + dObj.event.event_id + '"' + rich_snippets_itemprop + ariatxt + ' data-ismoreinfo="' + (action_is_more_info ? 1 : 0) + '">' + link_name + '</a>';
    } else if (dObj.event.system_url) {
        var disp_hop_text = '';
        var is_resalePartner = check_resalePartnerURL( dObj.event.system_url_unencoded );
        if( dObj.purchase_domain ) {
            if (is_resalePartner) {
                
                disp_hop_text = '<div class="' + margin_class + '"><span class="inline_block" style="max-width:100px;">Resale Tickets on Partner Site</span></div>';
                
            } else {
                disp_hop_text = '<div class="' + margin_class + '">' + org_hash[ dObj.purchase_domain ].hop_txt + '</div>';
            }
            margin_applied = true;
        } else {
            if (is_resalePartner) {
                
                disp_hop_text = '<div class="' + margin_class + '"><span class="inline_block" style="max-width:100px;">Resale Tickets on Partner Site</span></div>';
                
            } else {
                if (dObj.event.link_status == '1') {
                    disp_hop_text = '<div class="' + margin_class + '">' + dObj.event.link_text + '</div>';
                } else {
                    disp_hop_text = '<div class="' + margin_class + '">' + org_hash[ 'other' ].hop_txt + '</div>';
                }
            }
            margin_applied = true;
            if ( dObj.event.link_status == '2' ) {
                disp_hop_text = '';
                margin_applied = false;
            }

            if( dObj.event.system_url_unencoded ) {
                tm_omni_temp.set('au_h',['ticketing.ticketmaster.com.au']);
                tm_omni_temp.set('us_h',['ticketweb']);
            }
        }
        the_link = '<a' + link_href + link_target + link_onclick + ' id="pl_' + dObj.event.event_id + '" data-availability="' + dObj.event.event_id + '" class="' + link_class + '"' + rich_snippets_itemprop + ariatxt + ' data-ismoreinfo="' + (action_is_more_info ? 1 : 0) + '">' + link_name + '</a>' + disp_hop_text;
    }
    else if( dObj.venue_artist ) {
        the_link = '<a' + link_href + link_target + link_onclick + ' id="pl_' + dObj.event.event_id + '" data-availability="' + dObj.event.event_id + '" class="' + link_class + '"' + rich_snippets_itemprop + ariatxt + ' data-ismoreinfo="' + (action_is_more_info ? 1 : 0) + '">' + link_name + '</a>';
    } else {
        the_link = '<a' + link_href + link_target + link_onclick + ' id="pl_' + dObj.event.event_id + '" data-availability="' + dObj.event.event_id + '" class="' + link_class + '"' + rich_snippets_itemprop + ariatxt + ' data-ismoreinfo="' + (action_is_more_info ? 1 : 0) + '">' + link_name + '</a>';
        if (event_text != '') {
            the_link += '<div class="' + margin_class + '">' + event_text + '</div>';
            margin_applied = true;
        }
    }

    if (use_sub) {
        onsales = dObj.onsale.onsales[0];
        if (onsales && !onsales.suppress) {
            var tmp = '';
            if (onsales.onsale_type == "2") {
                if (dObj.page_type == 'member') {
                    tmp += '<strong><span class="hiLite">presale begins </span></strong>';
                } else {
                    tmp += "presale begins:";
                }
            } else if (onsales.onsale_type == "1") {
                if (dObj.page_type == 'member') {
                    tmp += '<strong><span class="hiLite">on sale </span></strong>';
                } else {
                    tmp += "on sale:";
                }
            }
            
            tmp += addAbbrToDOW(onsales.interval.start);
            link_subhead.push(tmp);
        } else {
            link_subhead.push('currently not on sale');
        }
    }

    for (i = 0 ; i < link_subhead.length ; i++) {
        if (i == 0 && !margin_applied) {
            the_link += '<div class="' + margin_class + '">' + link_subhead[i] + '</div>';
            margin_applied = true;
        } else {
            the_link += '<div>' + link_subhead[i] + '</div>';
        }
    }
    return the_link;
}
function addAbbrToDOW(date){
    var weekDays = $H({'Mon':'Monday',
                       'Tue':'Tuesday',
                       'Wed':'Wednesday',
                       'Thu':'Thursday',
                       'Fri':'Friday',
                       'Sat':'Saturday',
                       'Sun':'Sunday'});

            var seperator = ',';    
    var date_time = date.split(seperator);
    var dow = date_time.splice(0,1);
    date_time = date_time.join(seperator);

    var dow_long = weekDays.get(dow);
    if ( dow_long ) {
        return "<abbr title=" + dow_long + ">" + dow + "</abbr>" + seperator + date_time;
    }
    return date;
}</script>

<script type="text/javascript">

function buildSellButton(data){

    var btn = '';
    var button_state = data.Button_state || "hidden";
    var link_type = data.Flow_link ? data.Flow_link : "";
    
    var details = {
                    hidden: {href: {}, btnClass: "sell-button-hidden"}, 
                    disable: {href: {}, btnClass: "button-disabled button-secondary"}, 
                    enable: {href: {TM_flow: "http://resale.ticketmaster.com", TMR_flow: "http://anotherresale.ticketmaster.com"}, btnClass: "button-secondary"}
                    };

        btn = jQuery('<a>', {
                                    text: data.calendar_view ? 'Sell' :'Sell Tickets',
                                    href: link_type ? details[button_state].href[link_type] : "#",
                                    click: function(evt){
                                            if(button_state !== "enable"){
                                                evt.preventDefault();
                                            }
                                    },
                                    'class': details[button_state].btnClass,
                                    title: data.hover_text ? data.hover_text : ""                                   
                                });
        
    
    return btn
    
}

</script><script type="text/javascript">
window.onload = function() {
    if (TM.Ads && typeof TM.Ads.iframeAssets != "undefined" && TM.Ads.iframeAssets.length > 0){
       jQuery.each(TM.Ads.iframeAssets, function(i,k){
           if( jQuery( k.name ).length > 0 && k.src ){
              if ((this.name) == "#edp_leaderboard"){
                  this.src = appendTransID(this.src, true);
              }
              ( function(o){
                   setTimeout( function() { 
                       jQuery( o.name ).attr("src", o.src ) 
                   } , 200 );
               }(k) )
           }
       })
    }
}

</script>            <div class="clear"></div>
        </div><!-- end mainContent -->
                <div id="bottomPlacement" class="top-selling" style="display:none;"></div>
    </div><!-- end frame -->    
</div><!-- end contentWrap -->
<!-- END CONTENT/START FOOTER -->   <div id="site-footer" role="contentinfo">
	<div class="frame">
  <ul class="footer-links" role="navigation">
    <li><a href="http://lntv.com/news/?tm_link=tm_i_blog">Blog</a></li>
    <li><a href="http://concerts.livenation.com/careers?tm_link=tm_i_careers" target="_blank">Careers</a></li>
    <li><a href="http://concerts.livenation.com/h/terms.html?tm_link=tm_i_terms" rel="nofollow">Terms of Use</a></li>
    <li><a href="http://concerts.livenation.com/h/privacy.html?tm_link=tm_i_pp" rel="nofollow">Privacy Policy</a></li>
    <li><a href="http://concerts.livenation.com/h/ad-choices.html?tm_link=tm_i_adchoices" rel="nofollow">AdChoices</a></li>
    <li><a href="http://investors.livenationentertainment.com">Investor Relations</a></li>
    <li><a href="http://concerts.livenation.com/h/help.html?tm_link=tm_i_help">Help/FAQ</a></li>
  </ul>
		<ul class="footer-links floatRight mgRt10">
      		<li><a href="https://www.facebook.com/livenation" role="link" title="opens in a new window" target="_blank"><img src="http://s1.ticketm.net/ln/en-us/img/sys/facebook-icon_22x20.png" alt="Facebook" /></a></li>
      		<li><a href="https://www.twitter.com/livenation" role="link" title="opens in a new window" target="_blank"><img src="http://s1.ticketm.net/ln/en-us/img/sys/twitter-icon_22x20.png" alt="Twitter" /></a></li>
            <li><a href="http://instagram.com/livenation" role="link" target="_blank" title="LiveNation Instagram photos"><img alt="LiveNation Instagram photos" src="http://s1.ticketm.net/ln/en-us/img/sys/instagram-icon_18x18.png"><span class="hideContent">External website. Opens in a new window</span></a></li>
      		<li><a href="http://www.pinterest.com/livenation" role="link" title="opens in a new window" target="_blank"><img src="http://s1.ticketm.net/ln/en-us/img/sys/pinterest-icon_22x20.png" alt="Pinterest" /></a></li>
    	</ul>          <p class="site-disclaimer-heading mgLft10 txtLft">BY CONTINUING PAST THIS PAGE, YOU AGREE TO OUR <a href="http://concerts.livenation.com/h/terms.html?tm_link=tm_i_terms" rel="nofollow">TERMS OF USE</a>.
        </p>            <div id="footerSAPlogo"><a href="http://www.sap.com/index.html" target="_blank" role="link" title="Sponsored by SAP" class="floatRight"><img src="http://s1.ticketm.net/ln/en-us/img/sys/sponsor-sap.png" alt="Sponsored by SAP" /><span class="hideContent">External website. Opens in a new window</span></a></div>        <p class="site-disclaimer mgLft10 txtLft"><a href="http://concerts.livenation.com/h/privacy.html?tm_link=tm_i_privacy" rel="nofollow" target="_blank">Privacy Policy</a> | &copy; 2006 - 2016 Live Nation Worldwide, Inc. All rights reserved.<br />  This product uses the Instagram API but is not endorsed or certified by Instagram.</p>
        <ul id="secureLogos" class="mgLft10 txtLft">
            <li><a rel="nofollow" target="cybertrust" href="http://secure.omniroot.com/en/find/sealct.cfm?cn=concerts.livenation.com" class="vcs"><span class="hideContent">Verizon CyberTrust Security - Secured Site</span></a></li>            <li><a target="_blank" title="TRUSTe European Safe Harbor certification" href="//privacy.truste.com/privacy-seal/Live-Nation-Entertainment/validation?rid=3fc25b41-e78d-4949-a548-90f20b4b3f2b" class="truste"><span class="hideContent">TRUSTe Certified Privacy</span></a></li>        </ul>	</div>
</div><!-- end footer -->
<script  type="text/javascript" src="http://s1.ticketm.net/en-us/js/5c5a09692a0aea647f5a8d2dcd7f5aae/omniture_tracker.js"></script>
<script type="text/javascript"> 
var omni_recognized;
var cookie_id = GetCookie("MID");
if ( cookie_id == null || cookie_id.length == 0 ) {
    omni_recognized = "unrecognized";
}
else {
    omni_recognized = "recognized";
}

tm_omn.campaign = calcCampaign();
tm_omn.pageName = "microsite_generic"; /* Page Name */


tm_omn.products = tm_omni_temp.get('omnEID') != '' ? ';' + tm_omni_temp.get('omnEID') : '';
    
        
    


tm_omn.events="";
tm_omn.event74 = "";
tm_omn.event75 = "";
tm_omn.channel = "microsite_generic"; /* Page Type */
tm_omn.server = "";  /*  Server */
tm_omn.pageType = ""; /*  Pages Not Found */
tm_omn.prop1 = "";  /* Sub Page Type  */
tm_omn.prop2 = "";  /* Level 1 */
tm_omn.prop3 = "";  /* Level 2 */
tm_omn.prop4 = "";  /* Previous Page Name      */
tm_omn.prop5 = "";  /* Internal Search Term    */
tm_omn.prop6 = "";  /* Total # of Search Results Returned */
tm_omn.prop7 = "";  /* Search Refinements      */tm_omn.prop8 = "";  /* Ticket Insurance        */
tm_omn.prop9 = "national_" + omni_recognized;  /* Navigation State        */
tm_omn.prop10 = "";  /* Flash Version   */
tm_omn.prop11 = "";  /* Set Location Value      */  tm_omn.prop12 = tm_omni_temp.get('prop12') ? tm_omni_temp.get('prop12') : '';  /* Modules Available       */tm_omn.prop13 = GetCookie('MID') ? "Recognized" : "Unrecognized";  /* Logged in status        */
tm_omn.prop14 = new $H( location.search.toQueryParams() ).get('tm_link'); /* Navigation Link */
tm_omn.prop15 = "en-us";  /* Language        */
tm_omn.prop16 = "";  /* Page Name - Detailed  */
tm_omn.prop17 = "LN_US";  /* which domain  */ 

/* These props are for Google reCaptcha, Solve Captcha and for Resale listings*/tm_omn.prop18 = "";
tm_omn.prop19 = "";
tm_omn.prop21 = "";

tm_omn.prop27 = GetCookie("BID") ? GetCookie("BID") : "";
tm_omn.prop28 = GetCookie("SID") ? GetCookie("SID") : "";
tm_omn.prop33 = "D=g";
tm_omn.prop44 = "";
tm_omn.prop46 = "";
tm_omn.prop65 = "";
tm_omn.eVar2 = "";  /* Level 1 */
tm_omn.eVar3 = "";  /* Level 2 */   
tm_omn.eVar7 = ""; /* Internal Search Term    */
tm_omn.eVar8 = tm_omni_temp.get('omnMID');  /* Entry Market    */
tm_omn.eVar9 = tm_omn.prop9;
tm_omn.eVar10 = tm_omni_temp.get('omnMID');  /* Merchandising Market    */  tm_omn.eVar12 = "";  /* Modules Available       */tm_omn.eVar13 = "";  /* Module clicked  */
tm_omn.eVar14 = "";  /* Navigation Link */
tm_omn.eVar15 = calc15();  /* Merchandising Link      */
tm_omn.eVar16 = tm_omni_temp.get('omnVID');  /* Venue ID */
tm_omn.eVar17 = tm_omni_temp.get('omnAID');  /* Artist ID  */
tm_omn.eVar18 = "";  /* Day of Week     */
tm_omn.eVar19 = "";  /* Time of Day     */
tm_omn.eVar20 = "";  /* Payment Methods */
tm_omn.eVar21 = "none";  /* Brand   */
tm_omn.eVar22 = "en-us";  /* Language */ 
tm_omn.eVar23 = "";  /* EDP Type        */
tm_omn.eVar24 = "";  /* Checkout Type   */
tm_omn.eVar25 = "";  /* Promotion ID    */
tm_omn.eVar26 = "";  /* Visit Number    */
tm_omn.eVar27 = "";  /* Visit Referral Domain   */
tm_omn.eVar28 = "";  /* Original Referral Domain        */
tm_omn.eVar29 = "";  /* Entry Page Name */
tm_omn.eVar31 = "";  /* Delivery Methods */       
tm_omn.eVar32 = "";  /* BV rating       */
tm_omn.eVar33 = "";  /* Ticket Type     */
tm_omn.eVar34 = "";  /* Inventory Request Type */ 
tm_omn.eVar35 = "";  /* NTF Distribution        */
tm_omn.eVar36 = "";  /* Resale Posting ID or Order ID (same as Purchase ID) */
tm_omn.eVar37 = GetCookie("MID") ? GetCookie("MID") : "";  /* CustomerID      */
tm_omn.eVar38 = "LN_US";
tm_omn.eVar40 = "";
tm_omn.eVar43 = calc43();
if ( Discrete.id ) {
    tm_omn.eVar49 = Discrete.id;
}


tm_omn.eVar50 = GetCookie("MID_MD5") ? GetCookie("MID_MD5") : "";  /* CustomerID MD5     */
tm_omn.eVar52 = calc52();
tm_omn.eVar53 = tm_omn.prop27;
tm_omn.eVar54 = tm_omn.prop28;
tm_omn.eVar59 = "D=g";
tm_omn.pageType = "";
tm_omn.purchaseID  = "";  /* Purchase ID     */
tm_omn.state = "";  /* User Billing State */     
tm_omn.zip = "";  /* User Billing ZIP       */ 
tm_omn.currencyCode = "";  /* Currency Code */  

if(tm_omn.prop14){
   tm_omn.prop14 = "LN_US: " + tm_omn.prop14;
   }
if(tm_omni_temp.get('recentViewCarousel')){
  if(tm_omn.prop12){
     tm_omn.prop12 = tm_omn.prop12 + "," + tm_omni_temp.get('recentViewCarousel');
   }else{
     tm_omn.prop12 = tm_omni_temp.get('recentViewCarousel');
    }
}



function initshare(){
    new PeriodicalExecuter(function(pe) {
         if( $('at_hover') ) {
            var shareDivs = $$('div[onclick*=addthis_sendto]');
                shareDivs = shareDivs.uniq();
             shareDivs.each( function(d){
                var attr =  d.readAttribute('onclick');
                  if(!attr.include('more')){
                    d.observe('click',function(){
                       omniTracking.trackomni_favoriteshare([],[],'Share Event',d);
                       attr;
                     });
                  }
               });
         pe.stop();
         }
     }, 1);

}
function wt_stringscrape(passedValue, entryOutcome ){
var stringedData;
 try{
    passedValue = passedValue.stripScripts().stripTags().escapeHTML();
    passedValue = passedValue.empty() ? "null" : passedValue;
    passedValue = unescape(passedValue);

    if(entryOutcome){
       tm_omn.prop11 = "Success: " + passedValue;
     }else{
       tm_omn.prop11 = "Error: " + passedValue;
          }

            //if prop14 has value scode populates event. override it.
                tm_omn.prop14 = "";
            var changeLocationClick = new omniCustomClick({
                    linkTrackVars: 'prop11',
                     prop11: tm_omn.prop11
                  },
                 clickLink = 'Change Location',
                   newPage = false
                );
            changeLocationClick.handleClick(changeLocationClick)
    }catch(err){
          
    }
}

            function omniTrack( tag ) {
                tm_omni_temp.set('override_prop4', tm_omn.pageName);
                tm_omni_temp.set('pagetype','search') ;
                new PeriodicalExecuter(function(pe) {
                    if(tm_omni_temp.get('filterComplete') || tag.include('Pagination') || tag.include('other_matches')) {
                       if(tm_omni_temp.get('search_results_total') == tm_omni_temp.get('totalDocs_pageload')){
                             if(tag.include('_Pagination')){
                                 $w('pageName prop16').each( function(cl){
                                    tm_omn[cl] = tm_omn[cl].gsub(/: (Filter|Pagination)/,"") + ": Pagination";
                                 });
                              }else{
                                   if(tag.include('_filter')){
                                       $w('pageName prop16').each( function(cl){
                                           tm_omn[cl] = tm_omn[cl].gsub(/: (Filter|Pagination)/,'');
                                           tm_omn[cl] = tm_omn[cl] + ": Filter";
                                        });
                                   }else{
                                       $w('pageName prop16').each( function(cl){
                                           tm_omn[cl] = tm_omn[cl].gsub(/: (Filter|Pagination)/,'');
                                        });
                                   }
                              }
                        }else{
                             var filt_pag = "";
                             $w('pageName prop16').each( function(cl){
                                tm_omn[cl] = tm_omn[cl].gsub(/: (Filter|Pagination)/,"");
                                  if(tag.include('_Pagination')){
                                    filt_pag = ": Pagination";
                                  }
                                tm_omn[cl] = tm_omn[cl] + ": Filter" + filt_pag;
                             });
                        }                      
                             $w('prop14 prop7 eVar14').each( function(cs){
                                tm_omn[cs] = "LN_US: " + tag;
                             });
                            tm_omn.prop5 = "";
                            tm_omn.eVar7 = "";
                            tm_omn.prop4 = tm_omni_temp.get('override_prop4');
                            tm_omn.t();
                            pe.stop();
                            tm_omni_temp.set('firstFilter', '1')
                            tm_omni_temp.unset('filterComplete');
                      }
                   }, .25);
                 }


function calcCampaign(queryParams) {
  if(typeof queryParams === 'object' && queryParams !== null) {
		var q_p = queryParams;
	} 
	else {
		var q_p = location.search.toQueryParams();
    }

    if( q_p.SREF || q_p.fb_ref ) {
        var campaignsDoNotCut = [
            "P_HomePageModule_main",
            "P_MusicPageModule_main",
            "P_FamilyPageModule_main",
            "P_ArtsPageModule_main",
            "P_SportsPageModule_main",
            "P_SpecialsPageModule_main",
            "P_ArtistPageModule_main",
            "P_PurchasePageModule_main",
            "P_EventPageModule_main",
            "P_VenuePageModule_main"
        ];
        var doNotCutCampaign = Boolean(q_p.SREF && campaignsDoNotCut.indexOf(q_p.SREF) != -1);
        if(!doNotCutCampaign) {
            for(key in q_p) {
                q_p[key] = q_p[key].split("_")[0];
            }
        }

        var map = {
            "FBShare"                 : "SLfbk-001",
            "FBShareBuy"              : "SLfbk-002",
            "FBLike"                  : "SLfbk-003",
            "FBLikeURL"               : "SLfbk-004",
            "FBUnknown"               : "SLfbk-005",
            "FBKSharePurchISMnfss"    : "SLfbk-013",
            "FBKShareBuyPurchISMnfss" : "SLfbk-014",
            "FBKSharePurchISMftss"    : "SLfbk-015",
            "FBKShareBuyPurchISMftss" : "SLfbk-016",
            "FBKSharePurchISMftns"    : "SLfbk-017",
            "FBKShareBuyPurchISMftns" : "SLfbk-018",
            "FBKSharePurchISMnfns"    : "SLfbk-019",
            "FBKShareBuyPurchISMnfns" : "SLfbk-020",
            "FBKShareEdpISMnfss"      : "SLfbk-021",
            "FBKShareBuyEdpISMnfss"   : "SLfbk-022",
            "FBKShareEdpISMftss"      : "SLfbk-023",
            "FBKShareBuyEdpISMftss"   : "SLfbk-024",
            "FBKShareEdpISMftns"      : "SLfbk-025",
            "FBKShareBuyEdpISMftns"   : "SLfbk-026",
            "FBKShareEdpISMnfns"      : "SLfbk-027",
            "FBKShareBuyEdpISMnfns"   : "SLfbk-028",
            "FBKShareEdpSTagISMss"    : "SLfbk-029",
            "FBKShareBuyEdpSTagISMss" : "SLfbk-030",
            "FBKShareEdpSTagISMns"    : "SLfbk-031",
            "FBKShareBuyEdpSTagISMns" : "SLfbk-032",
            "FBKShareEdpFTagISMss"    : "SLfbk-033",
            "FBKShareBuyEdpFTagISMss" : "SLfbk-034",
            "FBKShareEdpFTagISMns"    : "SLfbk-035",
            "FBKShareBuyEdpFTagISMns" : "SLfbk-036",
            "FBKInviteTagNotify"      : "SLfbk-037",
            "FBKInviteEDP"            : "SLfbk-038",
            "FBKInviteHome"           : "SLfbk-039",
            "FBKInviteMusic"          : "SLfbk-040",
            "FBKInviteSports"         : "SLfbk-041",
            "FBKInviteFamily"         : "SLfbk-042",
            "FBKInviteArts"           : "SLfbk-043",
            "FBKInviteMisc"           : "SLfbk-044",
            "FBKInviteArtist"         : "SLfbk-045",
            "FBKInviteConfirmation"   : "SLfbk-046",
            "FBKLikeArtist"           : "SLfbk-047",
            "FBKLikeEvent"            : "SLfbk-048",
            "FBKLikeVenue"            : "SLfbk-049",
            "FBKLikeURLArtist"        : "SLfbk-050",
            "FBKLikeURLVenue"         : "SLfbk-051",
            "FBKLikeURLEvent"         : "SLfbk-052",
            "FBKShareArtist"          : "SLfbk-053",
            "FBKShareBuyArtist"       : "SLfbk-054",
            "FBKShareConfirmation"    : "SLfbk-055",
            "FBKShareBuyConfirmation" : "SLfbk-056",
            "TWArtist"                : "SLfbk-060",
            "TWVenue"                 : "SLfbk-061",
            "TWEvent"                 : "SLfbk-062",
            "TWConfirmation"          : "SLfbk-063",
            "FBKShare"                : "SLfbk-007",
            "FBKShareBuy"             : "SLfbk-008",
            "FBKLike"                 : "SLfbk-009",
            "FBKLikeURL"              : "SLfbk-010",
            "FBKInvite"               : "SLfbk-005",
            "FBKLikeArtist"           : "SLfbk-047",
            "FBKLikeEvent"            : "SLfbk-048",
            "FBKLikeVenue"            : "SLfbk-049",
            "FBiFBShare"              : "SLfbk-011",
            "FBiFBShareBuy"           : "SLfbk-012",
            "FBKInviteEspeciales"     : "SLfbk-044",
            "TWArtistKeyword"         : "SLfbk-064",
            "TWVenueKeyword"          : "SLfbk-065",
            "TWEventKeyword"          : "SLfbk-066",
            "TWConfirmationKeyword"   : "SLfbk-067",
            "FBLikeArtistTMm"         : "SLfbk-068",
            "FBLikeURLArtistTMm"      : "SLfbk-069",
            "FBKLikeEventTMm"         : "SLfbk-070",
            "FBKLikeURLEventTMm"      : "SLfbk-071",
            "FBLikeArtist8BTMef"      : "SLfbk-072",
            "FBLikeURLArtist8BTMef"   : "SLfbk-073",
            "FBLikeArtist8BTMpe"      : "SLfbk-074",
            "FBLikeURLArtist8BTMpe"   : "SLfbk-075",
            "FBLikeArtist8BTM"        : "SLfbk-076",
            "FBLikeURLArtist8BTM"     : "SLfbk-077",
            "FBKLikeEvent8BTM"        : "SLfbk-078",
            "FBKLikeURLEvent8BTM"     : "SLfbk-079",
            "FBKLikeEvent8BTMef"      : "SLfbk-080",
            "FBKLikeURLEvent8BTMef"   : "SLfbk-081",
            "FBKShareRSVP8BTMef"      : "SLfbk-082",
            "FBKShareBuyRSVP8BTMef"   : "SLfbk-083",
            "FBKShareRSVP8BTMedp"     : "SLfbk-084",
            "FBKShareBuyRSVP8BTMedp"  : "SLfbk-085",
            "FBKShareRSVP8BTMedp2"    : "SLfbk-086",
            "FBKShareBuyRSVP8BTMedp2" : "SLfbk-087",
            "FBKShareRSVP8BTMcp"      : "SLfbk-088",
            "FBKShareBuyRSVP8BTMcp"   : "SLfbk-089",
            "FBKShareRSVP8BTMc"       : "SLfbk-090",
            "FBKShareBuyRSVP8BTMc"    : "SLfbk-091",
            "FBKShareWANT8BTMedp"     : "SLfbk-092",
            "FBKShareBuyWANT8BTMedp"  : "SLfbk-093",
            "FBKShareJUST8BTMc"       : "SLfbk-094",
            "FBKShareBuyJUST8BTMc"    : "SLfbk-095",
            "TWVenueArtist"           : "SLfbk-110",
            "FBKLikeVenueArtist"      : "SLfbk-109"
        };
        if( map[q_p.SREF] || map[q_p.fb_ref] ) {
            return map[q_p.SREF] || map[q_p.fb_ref];
        }
        else {
            return q_p.SREF || q_p.fb_ref;
        }
    }
}

function calc43() {
    var q_p = location.search.toQueryParams();
    if( q_p.SFBState ) {
        switch( q_p.SFBState ) {
            case "Connected" :
                return 'Connected';
            break;
            case "Not-Connected" :
                return 'Not Connected';
            break;
            case "Unknown" :
                return 'Unknown';
            break;
        }
    }
}

function calc52() {
    var c_v = GetCookie("GEO_OMN");
    if ( c_v == null || c_v.length == 0 ) {
        return 'Geotargeting Not Enabled';
    }
    else {
        switch( c_v ) {
          case "ba":
            return 'No Call Made Browse Area Cookie';
          case "ua":
            return 'No Call Made User Area Cookie';
          case "in":
            return 'In Area';
          case "out":
            return 'Out of Area';
          case "unk":
            return 'Unidentifiable';
          case "aol":
            return 'AOL';
          case "corp":
            return 'Corporation';
          case "anon":
            return 'Anonymous';
          case "sat":
            return 'Satellite';
          case "seo":
            return 'SEO Crawler';
          default:
            return 'Geotargeting No Data';
        }
    }
}

function calc15() {
    var q_p = location.search.toQueryParams();
    if( q_p.tm_link ) {

        return validateTmLink( $H( location.search.toQueryParams() ).get('tm_link') );
    }
    else if(q_p.mch_link){
        return retrieveMchLnk( $H( location.search.toQueryParams() ).get('mch_link') );
    }
    else if( q_p.SREF ) {
        var to_return = 'LN_US: ' + 'FBConn_click_';
        var set_events = false;
        if( q_p.SREF.include("P_HomePageModule_main") ) {
            to_return += 'home1';
            set_events = true;
        }
        if( q_p.SREF.include("P_MusicPageModule_main") ) {
            to_return += 'music1';
            set_events = true;
        }
        if( q_p.SREF.include("P_FamilyPageModule_main") ) {
            to_return += 'family1';
            set_events = true;
        }
        if( q_p.SREF.include("P_ArtsPageModule_main") ) {
            to_return += 'arts1';
            set_events = true;
        }
        if( q_p.SREF.include("P_SportsPageModule_main") ) {
            to_return += 'sports1';
            set_events = true;
        }
        if( q_p.SREF.include("P_SpecialsPageModule_main") ) {
            to_return += 'specials1';
            set_events = true;
        }
        if( q_p.SREF.include("P_ArtistPageModule_main") ) {
            to_return += 'artist1';
            set_events = true;
        }
        if( q_p.SREF.include("P_PurchasePageModule_main") ) {
            to_return += 'purchase1';
            set_events = true;
        }
        if( q_p.SREF.include("P_EventPageModule_main") ) {
            to_return += 'event1';
            set_events = true;
        }
        if( q_p.SREF.include("P_VenuePageModule_main") ) {
            to_return += 'venue1';
            set_events = true;
        }
        if( set_events ) {
            tm_omn.linkTrackVars = 'events,eVar15';
            tm_omn.linkTrackEvents = 'event14';
            tm_omn.events = 'event14';
            return to_return;
        }
    }
}

function retrieveMchLnk(mchLinkVal){
          tm_omn.linkTrackVars = 'events,eVar15';
          tm_omn.linkTrackEvents = 'event14';
          tm_omn.events=tm_omn.apl(tm_omn.events,'event14',',',2);
          mchLinkVal = 'LN_US: ' + mchLinkVal;
          return mchLinkVal;
          tm_omn.eVar15 = tm_omn.getValOnce(tm_omn.eVar15,'s_evar15',0);
}

function validateTmLink(val){
// added tm_artist_rc and tm_artist_rv as a fix for artist page recommendation bug
// this should either be remove or replace artist_rc and artist_rv after we confirm
// artist should have prefix or not
var arrLinkTest = [
                     /^(tm_)(home|homeA|music|sports|arts|family|specials|toros)_(ts|c|d|event|g|h|j|k|lv|n|artist)(\d+)$/i,
                     /^(artist_rc_)(\w+)$/i,
                     /^(artist_rv_)(\w+)$/i,
                     /^(tm_artist_rc_)(\w+)$/i,
                     /^(tm_artist_rv_)(\w+)$/i,
                     /^(edp_artist_)(\w+)$/i,
                     /^(mytm_recommend_image|mytm_recommend_name)(\d+)$/i,
                     /^(tm_)(home|homeA|music|sports|arts|family|specials|toros|artist|conf|mytm|search|browse|venue|conf|mycart)(_rc_)(findtix|image|name|moredates|rating|venue)\d+$/i,
                     /^(tm_)(home|homeA|music|sports|arts|family|specials|toros|artist|conf|mytm|search|browse|venue|conf|mycart)(_rv(\d|\d_viewed\d)?_?)((findtix|image|name|moredates|rating|venue|search|browse)(\d+)?)?$/i,
                     /^(\w*)(_rv_|_rc_|_recommend_)(rating|viewed)\d+/i,
                     /^(tm_)(home|browse|section|search|artist|venue|mytm)(_rv_)(\w*)/i,
                     /(_rv_)(image|name)\d+$/i,
                     /^(tm_)(home|homeA|music|sports|arts|family|specials|toros)(\w*)_(r|f)(\d+)$/i,
                     /^(mytm_favEvent_local\w*)|(mycart_favEvent_local\w*)|(mytm_favEvent_else_Name)$/i,
                     /^(tm_homeA_popular)(\d+)$/i,
                     /^(tm_\w*)(_b_1000)(\d+_\d+)$/i
                            ]

   for(i=0;i<arrLinkTest.length; i++){
       if(arrLinkTest[i].test(val)){
          tm_omn.linkTrackVars = 'events,eVar15';
          tm_omn.linkTrackEvents = 'event14';
          tm_omn.events=tm_omn.apl(tm_omn.events,'event14',',',2);
          val = 'LN_US: ' + val;
          return val;
          tm_omn.eVar15 = 'LN_US: ' + tm_omn.getValOnce(tm_omn.eVar15,'s_evar15',0);
          break;
        }
   }
}

function dcsMultiTrack(){
try{
  var dcs_to_omni = $A(arguments).last();
      omniTracking.navigation_link(dcs_to_omni, false);
   }catch(err){}
}


function sell_flow_confirmation() {}


</script>
<script type="text/javascript">
function getExitPopOmnitureVars() {
     var suffix = " ScoreBig Pop Up";
     var tmn_omn=window.tmn_omn;
     return {
             "pageName": omn_domain_owner + suffix,
             "channel": omn_domain_owner + suffix,
             "prop1": omn_domain_owner + suffix,
             "prop2": omn_domain_owner + suffix,
             "prop3": omn_domain_owner + suffix,
             "prop4": tm_omn.prop4,
             "prop9": tm_omn.prop9,
             "prop10": tm_omn.prop10,
             "prop13": tm_omn.prop13,
             "prop15": tm_omn.prop15,
             "prop16": omn_domain_owner + suffix,
             "prop17": tm_omn.prop17,
             "prop18": tm_omn.prop18,
             "prop19": tm_omn.prop19,
             "prop20": tm_omn.prop20,
             "prop21": tm_omn.prop21,

             "eVar8": tm_omn.eVar8,
             "eVar9": tm_omn.eVar9,
             "eVar10": tm_omn.eVar10,
             "eVar16": tm_omn.eVar16,
             "eVar17": tm_omn.eVar17,
             "eVar18": tm_omn.eVar18,
             "eVar19": tm_omn.eVar19,
             "eVar22": tm_omn.eVar22,
             "eVar26": tm_omn.eVar26,
             "eVar39": tm_omn.eVar39
     };
}

</script>

<script type="text/javascript">
var browseLinks = (function() {
    var _self = {
        defaultLinkType: 'seo',
        excludedKeys: ['category', 'root', 'dma', 'dma_id'],
        sortKeys: false,
        sortKeysArr: ['category', 'root', 'dma', 'dma_id', 'area', 'rdc_select', 'rds_smonth', 'rdc_sday', 'rdc_syear', 'rdc_emonth', 'rdc_eday', 'rcd_eyear', 'telval', 'type']
    };
    _self.genres = {
        "10001" : {
            "root_name" : "Music",
            "cat_10001" : "All Music",
            "Music" : 10001,
            "All Music" : 10001,
                "Alternative Rock" : 60,
                "cat_60" : "Alternative Rock",            
                "Cabaret" : 764,
                "cat_764" : "Cabaret",            
                "Classical" : 203,
                "cat_203" : "Classical",            
                "Comedy" : 51,
                "cat_51" : "Comedy",            
                "Country and Folk" : 2,
                "cat_2" : "Country and Folk",            
                "Dance/Electronic" : 201,
                "cat_201" : "Dance/Electronic",            
                "Festivals" : 766,
                "cat_766" : "Festivals",            
                "Hard Rock/Metal" : 200,
                "cat_200" : "Hard Rock/Metal",            
                "Jazz and Blues" : 4,
                "cat_4" : "Jazz and Blues",            
                "Latin" : 40,
                "cat_40" : "Latin",            
                "Miscellaneous" : 107,
                "cat_107" : "Miscellaneous",            
                "New Age and Spiritual" : 50,
                "cat_50" : "New Age and Spiritual",            
                "R&B/Urban Soul" : 202,
                "cat_202" : "R&B/Urban Soul",            
                "Rap and Hip-Hop" : 3,
                "cat_3" : "Rap and Hip-Hop",            
                "Rock and Pop" : 1,
                "cat_1" : "Rock and Pop",            
                "World Music" : 5,
                "cat_5" : "World Music",            
                "More Concerts" : 52,
                "cat_52" : "More Concerts"            
        },    
        "10004" : {
            "root_name" : "Sports",
            "cat_10004" : "All Sports",
            "Sports" : 10004,
            "All Sports" : 10004,
                "Baseball" : 10,
                "cat_10" : "Baseball",            
                "Basketball" : 7,
                "cat_7" : "Basketball",            
                "Boxing" : 33,
                "cat_33" : "Boxing",            
                "Bull Riding" : 61,
                "cat_61" : "Bull Riding",            
                "Competitions" : 206,
                "cat_206" : "Competitions",            
                "Curling" : 34,
                "cat_34" : "Curling",            
                "Field Sports" : 205,
                "cat_205" : "Field Sports",            
                "Football" : 8,
                "cat_8" : "Football",            
                "Golf" : 30,
                "cat_30" : "Golf",            
                "Handball" : 765,
                "cat_765" : "Handball",            
                "Hockey" : 9,
                "cat_9" : "Hockey",            
                "Lacrosse" : 35,
                "cat_35" : "Lacrosse",            
                "Mixed Martial Arts" : 830,
                "cat_830" : "Mixed Martial Arts",            
                "Motorsports" : 25,
                "cat_25" : "Motorsports",            
                "Rodeo" : 28,
                "cat_28" : "Rodeo",            
                "Skating" : 36,
                "cat_36" : "Skating",            
                "Soccer" : 11,
                "cat_11" : "Soccer",            
                "Tennis" : 31,
                "cat_31" : "Tennis",            
                "Volleyball" : 204,
                "cat_204" : "Volleyball",            
                "Wrestling" : 27,
                "cat_27" : "Wrestling",            
                "More Sports" : 102,
                "cat_102" : "More Sports"            
        },    
        "10002" : {
            "root_name" : "Arts & Theater",
            "cat_10002" : "All Arts & Theater",
            "Arts & Theater" : 10002,
            "All Arts & Theater" : 10002,
                "Broadway" : 16,
                "cat_16" : "Broadway",            
                "Off-Broadway" : 17,
                "cat_17" : "Off-Broadway",            
                "Ballet and Dance" : 12,
                "cat_12" : "Ballet and Dance",            
                "Classical" : 203,
                "cat_203" : "Classical",            
                "Comedy" : 51,
                "cat_51" : "Comedy",            
                "Museums and Exhibits" : 14,
                "cat_14" : "Museums and Exhibits",            
                "Musicals" : 207,
                "cat_207" : "Musicals",            
                "Opera" : 13,
                "cat_13" : "Opera",            
                "Plays" : 32,
                "cat_32" : "Plays",            
                "More Arts and Theater" : 53,
                "cat_53" : "More Arts and Theater"            
        },    
        "10003" : {
            "root_name" : "Family",
            "cat_10003" : "All Family",
            "Family" : 10003,
            "All Family" : 10003,
                "Children's Music and Theater" : 23,
                "cat_23" : "Children's Music and Theater",            
                "Circus" : 29,
                "cat_29" : "Circus",            
                "Fairs and Festivals" : 54,
                "cat_54" : "Fairs and Festivals",            
                "Family Attractions" : 19,
                "cat_19" : "Family Attractions",            
                "Ice Shows" : 22,
                "cat_22" : "Ice Shows",            
                "Magic Shows" : 209,
                "cat_209" : "Magic Shows",            
                "More Family" : 55,
                "cat_55" : "More Family"            
        },    
        "10005" : {
            "root_name" : "Miscellaneous",
            "cat_10005" : "All Miscellaneous",
            "Miscellaneous" : 10005,
            "All Miscellaneous" : 10005,
                "Audio Tours" : 240,
                "cat_240" : "Audio Tours",            
                "Camping" : 211,
                "cat_211" : "Camping",            
                "Casino" : 57,
                "cat_57" : "Casino",            
                "Concession Vouchers" : 239,
                "cat_239" : "Concession Vouchers",            
                "Cruise and Sightseeing" : 106,
                "cat_106" : "Cruise and Sightseeing",            
                "Dinner Package" : 238,
                "cat_238" : "Dinner Package",            
                "Donations" : 109,
                "cat_109" : "Donations",            
                "Expo/Convention" : 105,
                "cat_105" : "Expo/Convention",            
                "Gift Certificates" : 56,
                "cat_56" : "Gift Certificates",            
                "Hotel Reservations" : 210,
                "cat_210" : "Hotel Reservations",            
                "Lecture/Seminar" : 104,
                "cat_104" : "Lecture/Seminar",            
                "Merchandise" : 108,
                "cat_108" : "Merchandise",            
                "Merchandise Vouchers" : 242,
                "cat_242" : "Merchandise Vouchers",            
                "Movies" : 59,
                "cat_59" : "Movies",            
                "Parking" : 103,
                "cat_103" : "Parking",            
                "Restaurants" : 58,
                "cat_58" : "Restaurants",            
                "More Miscellaneous" : 0,
                "cat_0" : "More Miscellaneous"            
        }    
    };

    return {
        /**
         * @param int dma
         * @return string
         * @todo redevelop
         */
        getDmaZoneName: function (dma) {
            return "United States & Canada";
        },

        /**
         * @param int root
         * @param int category
         * @return string
         */
        getCategoryIdByName: function (root, name) {
            if (typeof _self.genres[root] == 'undefined') {
                return 0;
            }

            return _self.genres[root][name] || 0;
        },

        /**
         * @param int root
         * @param int category
         * @return string
         */
        getCategoryName: function (root, category) {
            if (typeof _self.genres[root] == 'undefined') {
                return '';
            }

            return _self.genres[root]['cat_' + category] || '';
        },

        /**
         * @param int root
         * @return string
         */
        getRootName: function (root) {
            return _self.genres[root] ? _self.genres[root]['root_name'] : '';
        },

        /**
         * Return urlified string
         *
         * @param string str
         * @return string suffix
         */
        transformUrlString: function (str, suffix) {
            var result = str.toLowerCase().replace(/^\s+|\s+$/g, '').replace(/&+/g, '-and-').replace(/\W+/g, '-');

            return result.length ? result + suffix : '';
        },

        /**
         * Compose seo link
         *
         * @param object obj
         * @param string linkType
         *
         * @return string
         */
        composeUrl: function (obj, linkType) {
            var result = '/browse', query;
            
            linkType = linkType || _self.defaultLinkType;
            
            obj.root = obj.root || 0;
            obj.rootName = obj.rootName || this.getRootName(obj.root);
            
            obj.category = obj.category || (obj.categoryName ? this.getCategoryIdByName(obj.root, obj.categoryName) : obj.root);
            obj.categoryName = obj.categoryName || this.getCategoryName(obj.root, obj.category);
            
            obj.dma = obj.dma || 0;
            obj.dmaName = obj.dmaName || this.getDmaZoneName(obj.dma);

            obj.queryParams = obj.queryParams || this.getQueryParams();
            
            if (linkType == 'seo') {
                if (obj.category) {
                    result += '/' + this.transformUrlString(obj.categoryName, '-') + 'catid-' + obj.category;
                }

                if (obj.root) {
                    result += '/' + this.transformUrlString(obj.rootName, '-') + 'rid-' + obj.root;
                
                    if (obj.dma) {
                        result += '/' + this.transformUrlString(obj.dmaName, '-') + 'dma-' + obj.dma;
                    }
                }
            } else {
                if (obj.category) {
                    obj.queryParams['category'] = obj.category;
                }
                
                if (obj.root) {
                    obj.queryParams['root'] = obj.root;
                }

                if (obj.dma) {
                    obj.queryParams['dma'] = obj.dma;
                }
            }

            query = $H(this.sortParameters(this.paramFilter(obj.queryParams, obj.excludeKeys || []))).toQueryString();
            return result + (query.length ? '?' + query : '');
        },

        /**
         * Compose URL and redirect to browse page
         *
         * @param object obj
         * @param string linkType
         */
        updateLocation: function (obj, linkType) {
            document.location = this.composeUrl(obj, linkType);
            return false;
        },

        /**
         * Sort query parameters
         *
         * @param object obj
         * @param array keys
         *
         * @return object
         */
        sortParameters: function (obj, keys) {
            var resultObj = {}, i = 0, l = 0;
            keys = keys || _self.sortKeysArr;
            l = keys.length;

            if (!_self.sortKeys || !l) {
                return obj;
            }

            for (; i < l; i++) {
                if (obj.hasOwnProperty(keys[i])) {
                    resultObj[keys[i]] = obj[keys[i]];
                }
            }

            return resultObj;
        },

        /**
         * Return current location path
         * Work only with /browse page
         *
         * @return object
         */
        getPathParams: function () {
            var path = location.pathname, result = {}, tmp;

            if (!/^\/browse/.test(path)) {
                return result;
            }

            tmp = path.match(/\/[\w-]*rid-([0-9]+)/);
            if (tmp && tmp.length) {
                result['root'] = tmp[1];
            }

            tmp = path.match(/\/[\w-]*catid-([0-9]+)/);
            if (tmp && tmp.length) {
                result['category'] = tmp[1];
            }

            tmp = path.match(/\/[\w-]*dma-([0-9]+)/);
            if (tmp && tmp.length) {
                result['dma'] = tmp[1];
            }

            return result;
        },

        /**
         * Return current query parameters
         *
         * @return object
         */
        getQueryParams: function () {
            return location.search ? document.URL.toQueryParams() : {};
        },

        /**
         * Clear query parameters
         *
         * @param object obj
         * @param array excludeKeys
         *
         * @return object
         */
        paramFilter: function (obj, excludeKeys) {
            var i;

            if (!excludeKeys || !excludeKeys.length) {
                excludeKeys = _self.excludedKeys;
            }

            i = excludeKeys.length;
            while (i--) {
                if (obj.hasOwnProperty(excludeKeys[i])) {
                    delete obj[excludeKeys[i]];
                }
            }

            return obj;
        }
    };
})();

/**
 * Transform form data to query params
 *
 * @param HTMLFormElement form
 * @return null redirect
 */
function submitBrowseForm(form) {
    var formData = jQuery(form).serializeArray(), object = {queryParams: {}};

    // Something Goes Wrong
    if (!formData || !formData.length) {
        return false;
    }

    formData.each(function (i) {
        if (i.name == 'category' || i.name == 'root' || i.name == 'dma') {
            object[i.name] = i.value;
        } else {
            object['queryParams'][i.name] = i.value;
        }
    });

    return browseLinks.updateLocation(object);
}
</script>

<!-- pos=464 -->
<div id='div-gpt-ad-slot-464-oop' class="gpt-ad-container">    <script type='text/javascript'>            googletag.cmd.push(function() {                    googletag.display('div-gpt-ad-slot-464-oop');            });    </script></div>
    <script type='text/javascript'>
    //<![CDATA[
        var _comscore = _comscore || [];
        var comScoreKW = "";
        if(typeof _comscore !== "undefined") {
            if(comScoreKW && comScoreKW.length > 0) {
                 _comscore.push({ c1: "2", c2: "3005317", options: {url_append: "comscorekw=" + comScoreKW}});
            } else {
                 _comscore.push({ c1: "2", c2: "3005317"});
            }
        }
        new OnWindowLoad( function() {
            (function() {
                  var s = document.createElement("script"), 
                      el = document.getElementsByTagName("script")[0];
                      s.async = true;
                      s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
                      el.parentNode.insertBefore(s, el);
            })();
        }, { load_last: true } );
    //]]>
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&c2=3005317&cv=2.2&cj=1" id="comScore_img" alt="" />
    </noscript>
	<script type="text/javascript">	
		 if(typeof _satellite !== "undefined" && typeof _satellite.pageBottom === "function"){
		 	 _satellite.pageBottom(); 
		 }
	 </script>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K4QMLG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K4QMLG');</script>
    <!-- End Google Tag Manager -->
</body>
</html>




